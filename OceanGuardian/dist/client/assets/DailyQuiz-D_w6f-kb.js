import{j as e}from"./index-w4qC22aZ.js";import{r as a,L as u}from"./vendor-tuWJg29S.js";import{$ as b,A as R,b as F,m as P,X as T,s as X,p as L}from"./ui-DmkW-1mw.js";import"./maps-D8oPmz78.js";function J(){const[s,g]=a.useState([]),[i,w]=a.useState(0),[n,d]=a.useState(null),[f,j]=a.useState([]),[c,y]=a.useState(null),[v,N]=a.useState(!0),[x,m]=a.useState(!1),[k,S]=a.useState(0),[C,q]=a.useState(0),[z,_]=a.useState(!1),[p,B]=a.useState(0);a.useEffect(()=>{A()},[]);const A=async()=>{try{const t=await(await fetch("/api/learning/quiz/daily")).json();t.questions&&(g(t.questions),_(t.alreadyCompleted))}catch(r){console.error("Failed to load quiz",r)}finally{N(!1)}},Q=r=>{n===null&&d(r)},E=()=>{if(n===null)return;const r=[...f,{questionId:s[i].id,selectedOptionIndex:n}];j(r),d(null),i<s.length-1?w(t=>t+1):I(r)},I=async r=>{m(!0);try{const l=await(await fetch("/api/learning/quiz/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({answers:r})})).json();y(l.results),S(l.earnedXp),q(l.streak),B(l.streakBonus)}catch(t){console.error("Failed to submit quiz",t)}finally{m(!1)}};if(v)return e.jsx("div",{className:"p-8 text-center text-white/40 font-black uppercase tracking-widest animate-pulse",children:"Syncing satellite data..."});if(z)return e.jsxs("div",{className:"max-w-md mx-auto mt-16 p-12 bg-secondary/60 border border-white/5 rounded-[3rem] shadow-2xl text-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-primary/5 to-transparent pointer-events-none"}),e.jsx("div",{className:"bg-primary/20 p-6 rounded-full w-24 h-24 mx-auto flex items-center justify-center mb-10 border border-primary/20 ring-4 ring-primary/10",children:e.jsx(b,{className:"h-12 w-12 text-primary brightness-125 animate-bounce"})}),e.jsx("h2",{className:"text-4xl font-black text-white tracking-tighter mb-4 uppercase",children:"Frequency Secure"}),e.jsx("p",{className:"text-white/40 font-black italic uppercase tracking-widest text-[10px] mb-12 leading-relaxed",children:"You've already transmitted today's data. Return in 24h for the next mission protocol."}),e.jsxs(u,{to:"/learning",className:"inline-flex items-center justify-center w-full px-10 py-5 bg-primary text-white rounded-2xl font-black uppercase tracking-[0.2em] text-[10px] hover:bg-primary/80 transition-all shadow-xl shadow-primary/20 active:scale-95 group",children:[e.jsx(R,{className:"h-4 w-4 mr-3 transition-transform group-hover:rotate-12"}),"Back to Hub"]})]});if(c){const r=c.filter(t=>t.isCorrect).length;return e.jsx("div",{className:"max-w-2xl mx-auto mt-8 px-4",children:e.jsxs("div",{className:"bg-secondary/60 border border-white/5 rounded-[3.5rem] overflow-hidden shadow-2xl relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-primary/5 to-transparent pointer-events-none"}),e.jsxs("div",{className:"bg-primary/10 p-12 text-center border-b border-white/5 relative z-10",children:[e.jsx(F,{className:"h-24 w-24 mx-auto mb-8 text-accent animate-pulse drop-shadow-[0_0_25px_rgba(255,100,50,0.4)]"}),e.jsx("h2",{className:"text-5xl font-black text-white tracking-tighter mb-2 uppercase",children:"Sync complete"}),e.jsxs("p",{className:"text-primary brightness-125 text-xl font-black uppercase tracking-[0.3em] italic",children:["Sync Rate: ",r,e.jsx("span",{className:"text-white/20",children:"/"}),s.length]})]}),e.jsxs("div",{className:"p-12 relative z-10",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-8 mb-12",children:[e.jsxs("div",{className:"text-center group p-6 bg-white/5 rounded-[2rem] border border-white/5 hover:border-primary/20 transition-all",children:[e.jsx("p",{className:"text-[10px] text-white/30 font-black uppercase tracking-widest mb-2",children:"XP Gain"}),e.jsxs("p",{className:"text-4xl font-black text-primary tracking-tighter italic",children:["+",k]})]}),e.jsxs("div",{className:"text-center group p-6 bg-white/5 rounded-[2rem] border border-white/5 hover:border-orange-500/20 transition-all",children:[e.jsx("p",{className:"text-[10px] text-white/30 font-black uppercase tracking-widest mb-2",children:"Active Streak"}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("p",{className:"text-4xl font-black text-orange-500 tracking-tighter italic",children:C}),e.jsx(P,{className:"h-6 w-6 text-orange-500 fill-current"})]})]}),p>0&&e.jsxs("div",{className:"text-center group p-6 bg-accent/10 rounded-[2rem] border border-accent/20 transition-all col-span-2 md:col-span-1",children:[e.jsx("p",{className:"text-[10px] text-accent/50 font-black uppercase tracking-widest mb-2",children:"Bonus Protocol"}),e.jsxs("p",{className:"text-4xl font-black text-accent tracking-tighter italic",children:["+",p]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-[10px] font-black text-white/20 uppercase tracking-[0.4em] border-b border-white/5 pb-6",children:"Protocol Breakdown"}),c.map((t,l)=>e.jsxs("div",{className:o("p-8 rounded-[2rem] flex items-start gap-6 transition-all duration-500 group",t.isCorrect?"bg-primary/5 border border-primary/10 hover:border-primary/20":"bg-red-500/5 border border-red-500/10 hover:border-red-500/20"),children:[e.jsx("div",{className:o("mt-1 p-2 rounded-xl transition-all",t.isCorrect?"bg-primary/20 text-primary shadow-lg shadow-primary/10":"bg-red-500/20 text-red-500 shadow-lg shadow-red-500/10"),children:t.isCorrect?e.jsx(b,{className:"h-5 w-5"}):e.jsx(T,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-black text-white text-lg mb-2 uppercase tracking-tight group-hover:text-primary transition-colors",children:s.find(O=>O.id===t.questionId)?.question}),e.jsx("p",{className:"text-[13px] text-white/40 italic font-medium leading-relaxed",children:t.explanation})]})]},l))]}),e.jsx("div",{className:"mt-16 flex justify-center",children:e.jsx(u,{to:"/learning",className:"px-16 py-6 bg-white text-primary rounded-[2rem] font-black uppercase tracking-[0.3em] text-[10px] hover:scale-105 transition-all shadow-2xl shadow-primary/20 active:scale-95",children:"Re-engage Hub"})})]})]})})}const h=s[i];return e.jsxs("div",{className:"max-w-3xl mx-auto mt-12 px-4",children:[e.jsxs("div",{className:"mb-12",children:[e.jsxs("div",{className:"flex justify-between items-end mb-6 px-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.5em] text-primary mb-2",children:"Intelligence Sector"}),e.jsxs("span",{className:"text-3xl font-black text-white tracking-tighter uppercase italic",children:["Signal ",i+1,e.jsxs("span",{className:"text-white/20 ml-2",children:["of ",s.length]})]})]}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-accent italic bg-accent/10 px-4 py-2 rounded-full ring-1 ring-accent/20",children:s[i].category})]}),e.jsx("div",{className:"h-4 bg-white/5 rounded-full overflow-hidden border border-white/5 shadow-inner p-1",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-primary to-accent rounded-full transition-all duration-1000 ease-out shadow-[0_0_25px_rgba(3,169,244,0.6)]",style:{width:`${(i+1)/s.length*100}%`}})})]}),e.jsxs("div",{className:"bg-secondary/90 border border-white/10 rounded-[3.5rem] p-12 shadow-[0_32px_64px_-16px_rgba(0,0,0,0.6)] relative overflow-hidden group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-transparent pointer-events-none"}),e.jsx("div",{className:"absolute top-0 right-0 p-12 opacity-5 pointer-events-none group-hover:opacity-10 transition-opacity",children:e.jsx(X,{className:"h-40 w-40 text-primary"})}),e.jsxs("h2",{className:"text-2xl md:text-4xl font-black text-white tracking-tighter leading-tight mb-12 relative z-10 italic",children:['"',h.question,'"']}),e.jsx("div",{className:"space-y-4 relative z-10",children:h.options.map((r,t)=>e.jsx("button",{onClick:()=>Q(t),className:o("w-full text-left p-8 rounded-3xl border transition-all duration-500 group/opt relative overflow-hidden",n===t?"border-primary bg-primary shadow-2xl shadow-primary/20 translate-x-3 text-white":"border-white/5 bg-white/5 hover:bg-white/10 text-white/40"),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:o("w-10 h-10 rounded-xl border-2 mr-6 flex items-center justify-center transition-all font-black text-[10px]",n===t?"border-white bg-white text-primary":"border-white/10 text-white/20 group-hover/opt:border-white/30 group-hover/opt:text-white/60"),children:String.fromCharCode(65+t)}),e.jsx("span",{className:"text-base md:text-lg font-black tracking-tight uppercase leading-snug",children:r})]})},t))}),e.jsx("div",{className:"mt-16 flex justify-end",children:e.jsx("button",{onClick:E,disabled:n===null||x,className:o("inline-flex items-center px-12 py-6 rounded-[2rem] font-black uppercase tracking-[0.4em] text-[10px] transition-all shadow-2xl",n===null?"bg-white/5 text-white/20 border border-white/5 cursor-not-allowed":"bg-white text-primary hover:bg-primary hover:text-white shadow-primary/20 active:scale-95 group-hover:translate-x-1"),children:x?"Transmitting...":e.jsxs(e.Fragment,{children:[i===s.length-1?"End Protocol":"Secure Signal",e.jsx(L,{className:"ml-4 h-5 w-5 animate-pulse"})]})})})]})]})}function o(...s){return s.filter(Boolean).join(" ")}export{J as default};
