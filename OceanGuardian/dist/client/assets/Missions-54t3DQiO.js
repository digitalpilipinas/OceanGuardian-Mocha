import{u as w,j as e,B as i,c as b,f as j,g as v,h as N,C as y,i as k}from"./index-w4qC22aZ.js";import{e as C,r as a,L as _}from"./vendor-tuWJg29S.js";import{T as M,a as L,b as l}from"./tabs-_ekAYAst.js";import{P as m,N as T,o as S,q as B,l as D}from"./ui-DmkW-1mw.js";import"./maps-D8oPmz78.js";function U(){const{profile:c}=w(),o=C(),[n,p]=a.useState([]),[u,d]=a.useState(!0),[s,f]=a.useState("upcoming"),[x,g]=a.useState(!1);return a.useEffect(()=>{c&&fetch("/api/profiles/me").then(t=>t.ok?t.json():null).then(t=>{t&&["admin","ambassador"].includes(t.role)&&g(!0)}).catch(()=>{})},[c]),a.useEffect(()=>{(async()=>{d(!0);try{const r=s==="all"?"":`?status=${s}`,h=await fetch(`/api/missions${r}`);h.ok&&p(await h.json())}catch(r){console.error("Failed to fetch missions",r)}finally{d(!1)}})()},[s]),e.jsxs("div",{className:"container mx-auto py-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-12",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-white tracking-tighter",children:["Cleanup ",e.jsx("span",{className:"text-primary brightness-125",children:"Missions"})]}),e.jsx("p",{className:"text-white/60 text-lg font-bold mt-2 tracking-wide italic",children:"Join the collective effort to restore our oceans."})]}),x&&e.jsxs(i,{variant:"neomorph-primary",size:"lg",className:"h-16 px-10 text-xl font-black shadow-2xl shadow-primary/20",onClick:()=>o("/missions/create"),children:[e.jsx(m,{className:"mr-3 h-7 w-7"}),"Create Mission"]})]}),e.jsx("div",{className:"mb-14",children:e.jsx(M,{defaultValue:"upcoming",onValueChange:f,className:"w-full",children:e.jsxs(L,{className:"bg-black/20 p-2 rounded-[2rem] h-18 w-full md:w-auto border border-white/5",children:[e.jsx(l,{value:"upcoming",className:"rounded-[1.5rem] h-14 text-white/40 font-black uppercase tracking-widest data-[state=active]:bg-primary data-[state=active]:text-white data-[state=active]:shadow-lg data-[state=active]:shadow-primary/30 px-12 transition-all",children:"Upcoming"}),e.jsx(l,{value:"active",className:"rounded-[1.5rem] h-14 text-white/40 font-black uppercase tracking-widest data-[state=active]:bg-primary data-[state=active]:text-white data-[state=active]:shadow-lg data-[state=active]:shadow-primary/30 px-12 transition-all",children:"Active Now"}),e.jsx(l,{value:"completed",className:"rounded-[1.5rem] h-14 text-white/40 font-black uppercase tracking-widest data-[state=active]:bg-primary data-[state=active]:text-white data-[state=active]:shadow-lg data-[state=active]:shadow-primary/30 px-12 transition-all",children:"Completed"})]})})}),u?e.jsx("div",{className:"flex justify-center py-20",children:e.jsx(T,{className:"h-12 w-12 animate-spin text-primary"})}):n.length===0?e.jsxs("div",{className:"text-center py-20 neo-flat rounded-3xl bg-card/50",children:[e.jsx("p",{className:"text-2xl font-bold text-muted-foreground",children:"No missions found"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Be the first to organize one!"}),x&&e.jsx(i,{variant:"neomorph",className:"mt-8 px-10 h-14",onClick:()=>o("/missions/create"),children:"Create Mission"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:n.map(t=>e.jsxs("div",{className:"flex flex-col h-full group/mission border border-white/10 bg-secondary rounded-[2.5rem] overflow-hidden shadow-[0_32px_64px_-16px_rgba(0,0,0,0.6)] transition-all hover:scale-[1.02]",children:[t.image_url&&e.jsxs("div",{className:"relative h-60 w-full overflow-hidden",children:[e.jsx("img",{src:t.image_url,alt:t.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover/mission:scale-110"}),e.jsx("div",{className:"absolute top-5 right-5",children:e.jsx(b,{className:"capitalize px-5 py-2 rounded-full border border-white/10 bg-black/60 text-white font-black tracking-widest text-[10px] shadow-2xl",children:t.status})})]}),e.jsxs(j,{className:"pb-4 pt-8",children:[e.jsx(v,{className:"text-2xl font-black text-white tracking-tight line-clamp-1 group-hover/mission:text-primary transition-colors",children:t.title}),e.jsxs(N,{className:"flex items-center gap-2 font-black text-[10px] uppercase tracking-widest text-primary",children:[e.jsx(S,{className:"h-3.5 w-3.5"})," ",t.location_name]})]}),e.jsxs(y,{className:"flex-1 px-8",children:[e.jsx("p",{className:"text-sm text-white/70 leading-relaxed font-medium line-clamp-3 mb-8 bg-black/20 p-5 rounded-3xl border border-white/5 italic",children:t.description}),e.jsxs("div",{className:"flex flex-wrap gap-5 text-[10px] font-black uppercase tracking-[0.2em] text-white/60",children:[e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-white/5 rounded-full border border-white/5",children:[e.jsx(B,{className:"h-3.5 w-3.5 text-primary brightness-125"}),new Date(t.start_time).toLocaleDateString()]}),e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-white/5 rounded-full border border-white/5",children:[e.jsx(D,{className:"h-3.5 w-3.5 text-primary brightness-125"}),t.max_participants?`Max ${t.max_participants}`:"Open"]})]})]}),e.jsx(k,{className:"pt-6 pb-10 px-8",children:e.jsx(i,{className:"w-full h-14 text-xs font-black uppercase tracking-[0.3em] bg-white/5 text-white/60 hover:bg-primary hover:text-white hover:shadow-xl hover:shadow-primary/30 transition-all duration-500 rounded-3xl border border-white/10",asChild:!0,children:e.jsxs(_,{to:`/missions/${t.id}`,children:["Deploy ",e.jsx(m,{className:"ml-3 h-4 w-4"})]})})})]},t.id))})]})}export{U as default};
