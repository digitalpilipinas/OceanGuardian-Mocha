import{x as R,w as F,j as e,P as T,z as U,S as q,t as O,s as G,u as J,k as V,f as j,g as N,h as k,C,B as W}from"./index-w4qC22aZ.js";import{r as o}from"./vendor-tuWJg29S.js";import{L as m}from"./label-D8E2fVe1.js";import{I as P}from"./input-BK2Frxs7.js";import{u as X}from"./index-C8E_68Py.js";import{N as z,a9 as E,o as Y,U as $,f as K}from"./ui-DmkW-1mw.js";import"./maps-D8oPmz78.js";var w="Switch",[Q]=O(w),[Z,ee]=Q(w),A=o.forwardRef((s,d)=>{const{__scopeSwitch:r,name:h,checked:c,defaultChecked:t,required:i,disabled:l,value:u="on",onCheckedChange:a,form:n,...p}=s,[x,f]=o.useState(null),v=R(d,g=>f(g)),y=o.useRef(!1),_=x?n||!!x.closest("form"):!0,[b,L]=F({prop:c,defaultProp:t??!1,onChange:a,caller:w});return e.jsxs(Z,{scope:r,checked:b,disabled:l,children:[e.jsx(T.button,{type:"button",role:"switch","aria-checked":b,"aria-required":i,"data-state":H(b),"data-disabled":l?"":void 0,disabled:l,value:u,...p,ref:v,onClick:U(s.onClick,g=>{L(D=>!D),_&&(y.current=g.isPropagationStopped(),y.current||g.stopPropagation())})}),_&&e.jsx(I,{control:x,bubbles:!y.current,name:h,value:u,checked:b,required:i,disabled:l,form:n,style:{transform:"translateX(-100%)"}})]})});A.displayName=w;var M="SwitchThumb",B=o.forwardRef((s,d)=>{const{__scopeSwitch:r,...h}=s,c=ee(M,r);return e.jsx(T.span,{"data-state":H(c.checked),"data-disabled":c.disabled?"":void 0,...h,ref:d})});B.displayName=M;var te="SwitchBubbleInput",I=o.forwardRef(({__scopeSwitch:s,control:d,checked:r,bubbles:h=!0,...c},t)=>{const i=o.useRef(null),l=R(i,t),u=X(r),a=q(d);return o.useEffect(()=>{const n=i.current;if(!n)return;const p=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(p,"checked").set;if(u!==r&&f){const v=new Event("click",{bubbles:h});f.call(n,r),n.dispatchEvent(v)}},[u,r,h]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...c,tabIndex:-1,ref:l,style:{...c.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});I.displayName=te;function H(s){return s?"checked":"unchecked"}var ae=A,se=B;function S({className:s,size:d="default",...r}){return e.jsx(ae,{"data-slot":"switch","data-size":d,className:G("data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:aria-invalid:border-destructive/50 dark:data-[state=unchecked]:bg-input/80 shrink-0 rounded-full border border-transparent focus-visible:ring-[3px] aria-invalid:ring-[3px] data-[size=default]:h-[18.4px] data-[size=default]:w-[32px] data-[size=sm]:h-[14px] data-[size=sm]:w-[24px] peer group/switch relative inline-flex items-center transition-all outline-none after:absolute after:-inset-x-3 after:-inset-y-2 data-[disabled]:cursor-not-allowed data-[disabled]:opacity-50",s),...r,children:e.jsx(se,{"data-slot":"switch-thumb",className:"bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground rounded-full group-data-[size=default]/switch:size-4 group-data-[size=sm]/switch:size-3 group-data-[size=default]/switch:data-[state=checked]:translate-x-[calc(100%-2px)] group-data-[size=sm]/switch:data-[state=checked]:translate-x-[calc(100%-2px)] group-data-[size=default]/switch:data-[state=unchecked]:translate-x-0 group-data-[size=sm]/switch:data-[state=unchecked]:translate-x-0 pointer-events-none block ring-0 transition-transform"})})}function he(){const{profile:s}=J(),[d,r]=o.useState(!0),[h,c]=o.useState(!1),[t,i]=o.useState({region:"",country:"",leaderboard_visible:!0,is_anonymous:!1,notifications_enabled:!0});o.useEffect(()=>{if(!s)return;(async()=>{try{const n=await fetch("/api/profiles/me");if(n.ok){const p=await n.json();i({region:p.region||"",country:p.country||"",leaderboard_visible:p.leaderboard_visible===1,is_anonymous:p.is_anonymous===1,notifications_enabled:p.notifications_enabled===1})}}catch(n){console.error("Failed to load settings:",n)}finally{r(!1)}})()},[s]);const{toast:l}=V(),u=async()=>{if(s){c(!0);try{const a={region:t.region,country:t.country,leaderboard_visible:t.leaderboard_visible?1:0,is_anonymous:t.is_anonymous?1:0,notifications_enabled:t.notifications_enabled?1:0};(await fetch("/api/profiles/me",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok?l({title:"Settings saved",description:"Your preferences have been updated."}):l({title:"Error",description:"Failed to save settings.",variant:"destructive"})}catch(a){console.error("Error saving settings:",a),l({title:"Error",description:"An unexpected error occurred.",variant:"destructive"})}finally{c(!1)}}};return d?e.jsx("div",{className:"flex justify-center py-20",children:e.jsx(z,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsxs("div",{className:"container mx-auto px-4 py-14 max-w-4xl pb-32",children:[e.jsxs("div",{className:"flex items-center gap-6 mb-16",children:[e.jsx("div",{className:"p-5 rounded-[2rem] bg-white/5 border border-white/10 shadow-inner",children:e.jsx(E,{className:"h-10 w-10 text-primary brightness-125"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-5xl font-black text-white tracking-tighter",children:["Control ",e.jsx("span",{className:"text-primary brightness-125 italic",children:"Panel"})]}),e.jsx("p",{className:"text-sm font-bold text-white/40 mt-2 italic",children:"Configure your Guardian profile and privacy protocols"})]})]}),e.jsxs("div",{className:"space-y-10",children:[e.jsxs("div",{className:"bg-secondary/40 border border-white/10 rounded-[2.5rem] overflow-hidden shadow-2xl",children:[e.jsxs(j,{className:"p-10 pb-6",children:[e.jsxs(N,{className:"text-2xl font-black text-white tracking-tight flex items-center gap-3",children:[e.jsx(Y,{className:"h-6 w-6 text-primary"})," Location Protocols"]}),e.jsx(k,{className:"text-white/40 font-bold italic mt-2",children:"Set your deployment zone to join regional leaderboards."})]}),e.jsx(C,{className:"p-10 pt-0 space-y-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(m,{htmlFor:"country",className:"text-[10px] font-black uppercase tracking-[0.3em] text-white/30 ml-2",children:"Sovereign State"}),e.jsx(P,{id:"country",value:t.country,onChange:a=>i({...t,country:a.target.value}),placeholder:"e.g. Philippines",className:"h-14 bg-white/5 border-white/10 rounded-2xl px-6 text-white font-bold placeholder:text-white/10 focus:bg-white/10 transition-all shadow-inner"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(m,{htmlFor:"region",className:"text-[10px] font-black uppercase tracking-[0.3em] text-white/30 ml-2",children:"Deployment City"}),e.jsx(P,{id:"region",value:t.region,onChange:a=>i({...t,region:a.target.value}),placeholder:"e.g. Manila",className:"h-14 bg-white/5 border-white/10 rounded-2xl px-6 text-white font-bold placeholder:text-white/10 focus:bg-white/10 transition-all shadow-inner"})]})]})})]}),e.jsxs("div",{className:"bg-secondary/40 border border-white/10 rounded-[2.5rem] overflow-hidden shadow-2xl",children:[e.jsxs(j,{className:"p-10 pb-6",children:[e.jsxs(N,{className:"text-2xl font-black text-white tracking-tight flex items-center gap-3",children:[e.jsx($,{className:"h-6 w-6 text-primary"})," Stealth & Visibility"]}),e.jsx(k,{className:"text-white/40 font-bold italic mt-2",children:"Manage your digital footprint within the collective."})]}),e.jsxs(C,{className:"p-10 pt-0 space-y-10",children:[e.jsxs("div",{className:"flex items-center justify-between group",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-lg font-black text-white tracking-tight",children:"Active Transmissions"}),e.jsx("p",{className:"text-xs font-bold text-white/30 italic",children:"Allow your profile to appear on public leaderboards."})]}),e.jsx(S,{checked:t.leaderboard_visible,onCheckedChange:a=>i({...t,leaderboard_visible:a}),className:"data-[state=checked]:bg-primary"})]}),e.jsxs("div",{className:"flex items-center justify-between group",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-lg font-black text-white tracking-tight",children:"Ghost Protocol"}),e.jsx("p",{className:"text-xs font-bold text-white/30 italic",children:'Hide your identity on leaderboards (appear as "Anonymous").'})]}),e.jsx(S,{checked:t.is_anonymous,onCheckedChange:a=>i({...t,is_anonymous:a}),className:"data-[state=checked]:bg-primary"})]})]})]}),e.jsxs("div",{className:"bg-secondary/40 border border-white/10 rounded-[2.5rem] overflow-hidden shadow-2xl",children:[e.jsxs(j,{className:"p-10 pb-6",children:[e.jsxs(N,{className:"text-2xl font-black text-white tracking-tight flex items-center gap-3",children:[e.jsx(K,{className:"h-6 w-6 text-primary"})," Data Alerts"]}),e.jsx(k,{className:"text-white/40 font-bold italic mt-2",children:"Manage your real-time signal preferences."})]}),e.jsx(C,{className:"p-10 pt-0",children:e.jsxs("div",{className:"flex items-center justify-between group",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{className:"text-lg font-black text-white tracking-tight",children:"System Notifications"}),e.jsx("p",{className:"text-xs font-bold text-white/30 italic",children:"Receive alerts about mission priority and rewards."})]}),e.jsx(S,{checked:t.notifications_enabled,onCheckedChange:a=>i({...t,notifications_enabled:a}),className:"data-[state=checked]:bg-primary"})]})})]}),e.jsx("div",{className:"flex justify-end pt-10",children:e.jsxs(W,{onClick:u,disabled:h,className:"w-full h-16 rounded-[2rem] bg-primary text-white font-black uppercase tracking-widest text-xs shadow-2xl shadow-primary/40 border-none transition-all hover:scale-[1.02] active:scale-95",children:[h?e.jsx(z,{className:"mr-3 h-5 w-5 animate-spin"}):e.jsx(E,{className:"mr-3 h-5 w-5"}),"Authorize Changes"]})})]})]})}export{he as default};
