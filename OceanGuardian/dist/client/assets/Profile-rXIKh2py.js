import{j as e,P as ne,t as Ce,v as tt,w as st,R as at,x as Pe,y as rt,z as M,E as _e,F as nt,G as it,H as Ee,I as ot,J as lt,K as ct,L as dt,s as ie,m as we,B as H,u as xt,k as pt,e as ht,d as _,f as E,g as S,C as P,A as ut,a as mt,b as ft,c as I}from"./index-w4qC22aZ.js";import{r as l,f as gt,L as wt}from"./vendor-tuWJg29S.js";import{T as vt,a as bt,b as z,c as F}from"./tabs-_ekAYAst.js";import{x as jt}from"./types-mqNpvNOP.js";import{_ as ve,$ as yt,a0 as Se,X as Nt,m as se,R as kt,k as Tt,a1 as Ct,N as Re,a as Q,n as X,i as be,A as je,b as W,a2 as Pt,d as _t,S as Et,o as Z,j as ee,Q as St,T as ye,a3 as te,r as Rt,a4 as Dt,M as Lt}from"./ui-DmkW-1mw.js";import"./maps-D8oPmz78.js";var oe="Progress",le=100,[It]=Ce(oe),[At,Mt]=It(oe),De=l.forwardRef((t,a)=>{const{__scopeProgress:s,value:r=null,max:n,getValueLabel:d=Ot,...o}=t;(n||n===0)&&!Ne(n)&&console.error($t(`${n}`,"Progress"));const x=Ne(n)?n:le;r!==null&&!ke(r,x)&&console.error(zt(`${r}`,"Progress"));const c=ke(r,x)?r:null,u=Y(c)?d(c,x):void 0;return e.jsx(At,{scope:s,value:c,max:x,children:e.jsx(ne.div,{"aria-valuemax":x,"aria-valuemin":0,"aria-valuenow":Y(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":Ae(c,x),"data-value":c??void 0,"data-max":x,...o,ref:a})})});De.displayName=oe;var Le="ProgressIndicator",Ie=l.forwardRef((t,a)=>{const{__scopeProgress:s,...r}=t,n=Mt(Le,s);return e.jsx(ne.div,{"data-state":Ae(n.value,n.max),"data-value":n.value??void 0,"data-max":n.max,...r,ref:a})});Ie.displayName=Le;function Ot(t,a){return`${Math.round(t/a*100)}%`}function Ae(t,a){return t==null?"indeterminate":t===a?"complete":"loading"}function Y(t){return typeof t=="number"}function Ne(t){return Y(t)&&!isNaN(t)&&t>0}function ke(t,a){return Y(t)&&!isNaN(t)&&t<=a&&t>=0}function $t(t,a){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${a}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${le}\`.`}function zt(t,a){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${a}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${le} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Ft=De,Ht=Ie,[q]=Ce("Tooltip",[Ee]),J=Ee(),Me="TooltipProvider",Bt=700,ae="tooltip.open",[Gt,ce]=q(Me),Oe=t=>{const{__scopeTooltip:a,delayDuration:s=Bt,skipDelayDuration:r=300,disableHoverableContent:n=!1,children:d}=t,o=l.useRef(!0),x=l.useRef(!1),c=l.useRef(0);return l.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),e.jsx(Gt,{scope:a,isOpenDelayedRef:o,delayDuration:s,onOpen:l.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:l.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:x,onPointerInTransitChange:l.useCallback(u=>{x.current=u},[]),disableHoverableContent:n,children:d})};Oe.displayName=Me;var B="Tooltip",[Ut,G]=q(B),$e=t=>{const{__scopeTooltip:a,children:s,open:r,defaultOpen:n,onOpenChange:d,disableHoverableContent:o,delayDuration:x}=t,c=ce(B,t.__scopeTooltip),u=J(a),[p,g]=l.useState(null),w=tt(),m=l.useRef(0),j=o??c.disableHoverableContent,N=x??c.delayDuration,v=l.useRef(!1),[T,b]=st({prop:r,defaultProp:n??!1,onChange:U=>{U?(c.onOpen(),document.dispatchEvent(new CustomEvent(ae))):c.onClose(),d?.(U)},caller:B}),R=l.useMemo(()=>T?v.current?"delayed-open":"instant-open":"closed",[T]),A=l.useCallback(()=>{window.clearTimeout(m.current),m.current=0,v.current=!1,b(!0)},[b]),D=l.useCallback(()=>{window.clearTimeout(m.current),m.current=0,b(!1)},[b]),C=l.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{v.current=!0,b(!0),m.current=0},N)},[N,b]);return l.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),e.jsx(at,{...u,children:e.jsx(Ut,{scope:a,contentId:w,open:T,stateAttribute:R,trigger:p,onTriggerChange:g,onTriggerEnter:l.useCallback(()=>{c.isOpenDelayedRef.current?C():A()},[c.isOpenDelayedRef,C,A]),onTriggerLeave:l.useCallback(()=>{j?D():(window.clearTimeout(m.current),m.current=0)},[D,j]),onOpen:A,onClose:D,disableHoverableContent:j,children:s})})};$e.displayName=B;var re="TooltipTrigger",ze=l.forwardRef((t,a)=>{const{__scopeTooltip:s,...r}=t,n=G(re,s),d=ce(re,s),o=J(s),x=l.useRef(null),c=Pe(a,x,n.onTriggerChange),u=l.useRef(!1),p=l.useRef(!1),g=l.useCallback(()=>u.current=!1,[]);return l.useEffect(()=>()=>document.removeEventListener("pointerup",g),[g]),e.jsx(rt,{asChild:!0,...o,children:e.jsx(ne.button,{"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute,...r,ref:c,onPointerMove:M(t.onPointerMove,w=>{w.pointerType!=="touch"&&!p.current&&!d.isPointerInTransitRef.current&&(n.onTriggerEnter(),p.current=!0)}),onPointerLeave:M(t.onPointerLeave,()=>{n.onTriggerLeave(),p.current=!1}),onPointerDown:M(t.onPointerDown,()=>{n.open&&n.onClose(),u.current=!0,document.addEventListener("pointerup",g,{once:!0})}),onFocus:M(t.onFocus,()=>{u.current||n.onOpen()}),onBlur:M(t.onBlur,n.onClose),onClick:M(t.onClick,n.onClose)})})});ze.displayName=re;var de="TooltipPortal",[Vt,Xt]=q(de,{forceMount:void 0}),Fe=t=>{const{__scopeTooltip:a,forceMount:s,children:r,container:n}=t,d=G(de,a);return e.jsx(Vt,{scope:a,forceMount:s,children:e.jsx(_e,{present:s||d.open,children:e.jsx(nt,{asChild:!0,container:n,children:r})})})};Fe.displayName=de;var O="TooltipContent",He=l.forwardRef((t,a)=>{const s=Xt(O,t.__scopeTooltip),{forceMount:r=s.forceMount,side:n="top",...d}=t,o=G(O,t.__scopeTooltip);return e.jsx(_e,{present:r||o.open,children:o.disableHoverableContent?e.jsx(Be,{side:n,...d,ref:a}):e.jsx(Yt,{side:n,...d,ref:a})})}),Yt=l.forwardRef((t,a)=>{const s=G(O,t.__scopeTooltip),r=ce(O,t.__scopeTooltip),n=l.useRef(null),d=Pe(a,n),[o,x]=l.useState(null),{trigger:c,onClose:u}=s,p=n.current,{onPointerInTransitChange:g}=r,w=l.useCallback(()=>{x(null),g(!1)},[g]),m=l.useCallback((j,N)=>{const v=j.currentTarget,T={x:j.clientX,y:j.clientY},b=Qt(T,v.getBoundingClientRect()),R=Wt(T,b),A=Zt(N.getBoundingClientRect()),D=ts([...R,...A]);x(D),g(!0)},[g]);return l.useEffect(()=>()=>w(),[w]),l.useEffect(()=>{if(c&&p){const j=v=>m(v,p),N=v=>m(v,c);return c.addEventListener("pointerleave",j),p.addEventListener("pointerleave",N),()=>{c.removeEventListener("pointerleave",j),p.removeEventListener("pointerleave",N)}}},[c,p,m,w]),l.useEffect(()=>{if(o){const j=N=>{const v=N.target,T={x:N.clientX,y:N.clientY},b=c?.contains(v)||p?.contains(v),R=!es(T,o);b?w():R&&(w(),u())};return document.addEventListener("pointermove",j),()=>document.removeEventListener("pointermove",j)}},[c,p,o,u,w]),e.jsx(Be,{...t,ref:d})}),[qt,Jt]=q(B,{isInside:!1}),Kt=dt("TooltipContent"),Be=l.forwardRef((t,a)=>{const{__scopeTooltip:s,children:r,"aria-label":n,onEscapeKeyDown:d,onPointerDownOutside:o,...x}=t,c=G(O,s),u=J(s),{onClose:p}=c;return l.useEffect(()=>(document.addEventListener(ae,p),()=>document.removeEventListener(ae,p)),[p]),l.useEffect(()=>{if(c.trigger){const g=w=>{w.target?.contains(c.trigger)&&p()};return window.addEventListener("scroll",g,{capture:!0}),()=>window.removeEventListener("scroll",g,{capture:!0})}},[c.trigger,p]),e.jsx(ot,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:d,onPointerDownOutside:o,onFocusOutside:g=>g.preventDefault(),onDismiss:p,children:e.jsxs(lt,{"data-state":c.stateAttribute,...u,...x,ref:a,style:{...x.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(Kt,{children:r}),e.jsx(qt,{scope:s,isInside:!0,children:e.jsx(ct,{id:c.contentId,role:"tooltip",children:n||r})})]})})});He.displayName=O;var Ge="TooltipArrow",Ue=l.forwardRef((t,a)=>{const{__scopeTooltip:s,...r}=t,n=J(s);return Jt(Ge,s).isInside?null:e.jsx(it,{...n,...r,ref:a})});Ue.displayName=Ge;function Qt(t,a){const s=Math.abs(a.top-t.y),r=Math.abs(a.bottom-t.y),n=Math.abs(a.right-t.x),d=Math.abs(a.left-t.x);switch(Math.min(s,r,n,d)){case d:return"left";case n:return"right";case s:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Wt(t,a,s=5){const r=[];switch(a){case"top":r.push({x:t.x-s,y:t.y+s},{x:t.x+s,y:t.y+s});break;case"bottom":r.push({x:t.x-s,y:t.y-s},{x:t.x+s,y:t.y-s});break;case"left":r.push({x:t.x+s,y:t.y-s},{x:t.x+s,y:t.y+s});break;case"right":r.push({x:t.x-s,y:t.y-s},{x:t.x-s,y:t.y+s});break}return r}function Zt(t){const{top:a,right:s,bottom:r,left:n}=t;return[{x:n,y:a},{x:s,y:a},{x:s,y:r},{x:n,y:r}]}function es(t,a){const{x:s,y:r}=t;let n=!1;for(let d=0,o=a.length-1;d<a.length;o=d++){const x=a[d],c=a[o],u=x.x,p=x.y,g=c.x,w=c.y;p>r!=w>r&&s<(g-u)*(r-p)/(w-p)+u&&(n=!n)}return n}function ts(t){const a=t.slice();return a.sort((s,r)=>s.x<r.x?-1:s.x>r.x?1:s.y<r.y?-1:s.y>r.y?1:0),ss(a)}function ss(t){if(t.length<=1)return t.slice();const a=[];for(let r=0;r<t.length;r++){const n=t[r];for(;a.length>=2;){const d=a[a.length-1],o=a[a.length-2];if((d.x-o.x)*(n.y-o.y)>=(d.y-o.y)*(n.x-o.x))a.pop();else break}a.push(n)}a.pop();const s=[];for(let r=t.length-1;r>=0;r--){const n=t[r];for(;s.length>=2;){const d=s[s.length-1],o=s[s.length-2];if((d.x-o.x)*(n.y-o.y)>=(d.y-o.y)*(n.x-o.x))s.pop();else break}s.push(n)}return s.pop(),a.length===1&&s.length===1&&a[0].x===s[0].x&&a[0].y===s[0].y?a:a.concat(s)}var as=Oe,rs=$e,ns=ze,is=Fe,os=He,ls=Ue;function Te({className:t,value:a,...s}){return e.jsx(Ft,{"data-slot":"progress",className:ie("bg-muted h-3 rounded-4xl relative flex w-full items-center overflow-x-hidden",t),...s,children:e.jsx(Ht,{"data-slot":"progress-indicator",className:"bg-primary size-full flex-1 transition-all",style:{transform:`translateX(-${100-(a||0)}%)`}})})}function Ve({delayDuration:t=0,...a}){return e.jsx(as,{"data-slot":"tooltip-provider",delayDuration:t,...a})}function cs({...t}){return e.jsx(Ve,{children:e.jsx(rs,{"data-slot":"tooltip",...t})})}function ds({...t}){return e.jsx(ns,{"data-slot":"tooltip-trigger",...t})}function xs({className:t,sideOffset:a=0,children:s,...r}){return e.jsx(is,{children:e.jsxs(os,{"data-slot":"tooltip-content",sideOffset:a,className:ie("data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=open]:zoom-in-95 data-[state=delayed-open]:animate-in data-[state=delayed-open]:fade-in-0 data-[state=delayed-open]:zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 rounded-2xl px-3 py-1.5 text-xs [&_[data-slot=kbd]]:rounded-4xl bg-foreground text-background z-50 w-fit max-w-xs origin-[--radix-tooltip-content-transform-origin]",t),...r,children:[s,e.jsx(ls,{className:"size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px] bg-foreground fill-foreground z-50 translate-y-[calc(-50%_-_2px)]"})]})})}function ps({history:t}){const a=l.useMemo(()=>{const s=[],r=new Date,n=new Map(t.map(d=>[d.activity_date,d.type]));for(let d=29;d>=0;d--){const o=new Date(r);o.setDate(o.getDate()-d);const x=o.toISOString().split("T")[0],c=n.get(x);s.push({date:x,dayOfMonth:o.getDate(),type:c||(d===0?"future":"missed"),isToday:d===0})}return s},[t]);return e.jsxs("div",{className:"bg-white/5 backdrop-blur-sm rounded-xl p-4 border border-white/10",children:[e.jsx("h3",{className:"text-sm font-medium text-slate-300 mb-3",children:"Last 30 Days"}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:a.map(s=>{let r="bg-slate-800/50 text-slate-600 border-slate-700/50",n=ve;return s.type==="check_in"?(r="bg-emerald-500/20 text-emerald-400 border-emerald-500/30",n=yt):s.type==="freeze"?(r="bg-blue-500/20 text-blue-400 border-blue-500/30",n=Se):s.type==="missed"&&!s.isToday?(r="bg-red-500/10 text-red-400/50 border-red-500/20",n=Nt):s.isToday&&!s.type&&(r="bg-slate-800 text-slate-500 border-slate-700 border-dashed animate-pulse",n=ve),e.jsxs("div",{className:ie("aspect-square rounded-lg border flex flex-col items-center justify-center relative",r),title:`${s.date}: ${s.type||"pending"}`,children:[e.jsx("span",{className:"text-[10px] absolute top-1 right-1 opacity-50",children:s.dayOfMonth}),e.jsx(n,{className:"w-4 h-4"})]},s.date)})})]})}function hs({streakDays:t,streakFreezes:a}){return e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-8",children:[e.jsxs(we.div,{whileHover:{y:-5},className:"neo-flat rounded-3xl p-6 flex items-center justify-between group overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-orange-500/5 rounded-full -mr-8 -mt-8 transition-transform group-hover:scale-110"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"text-4xl font-extrabold text-orange-500",children:t}),e.jsx("div",{className:"text-xs text-muted-foreground uppercase tracking-widest font-bold mt-1",children:"Current Streak"})]}),e.jsx("div",{className:"relative z-10 w-16 h-16 rounded-2xl neo-pressed flex items-center justify-center",children:e.jsx(se,{className:"w-8 h-8 text-orange-500 fill-orange-500/10 animate-pulse"})})]}),e.jsxs(we.div,{whileHover:{y:-5},className:"neo-flat rounded-3xl p-6 flex items-center justify-between group overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-blue-500/5 rounded-full -mr-8 -mt-8 transition-transform group-hover:scale-110"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"text-4xl font-extrabold text-blue-500",children:a}),e.jsx("div",{className:"text-xs text-muted-foreground uppercase tracking-widest font-bold mt-1",children:"Freezes Left"})]}),e.jsx("div",{className:"relative z-10 w-16 h-16 rounded-2xl neo-pressed flex items-center justify-center",children:e.jsx(Se,{className:"w-8 h-8 text-blue-500 fill-blue-500/10"})})]})]})}function us({checkedIn:t,onCheckIn:a,streakDays:s}){const[r,n]=l.useState(!1),d=async()=>{n(!0);try{await a()}finally{n(!1)}},o=async()=>{const x=`I'm on a ${s}-day Plastic-Free Streak on OceanGuardian! Join me in protecting our oceans.`;if(navigator.share)try{await navigator.share({title:"Plastic-Free Streak",text:x,url:window.location.origin})}catch(c){console.error("Share failed",c)}else await navigator.clipboard.writeText(x),alert("Copied directly to clipboard!")};return t?e.jsxs("div",{className:"neo-flat rounded-3xl p-8 text-center animate-in fade-in zoom-in duration-500 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-32 h-32 bg-emerald-500/5 rounded-full -ml-16 -mt-16"}),e.jsx("div",{className:"relative z-10 w-20 h-20 neo-pressed rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(kt,{className:"w-10 h-10 text-emerald-500"})}),e.jsx("h3",{className:"text-2xl font-bold text-foreground mb-1 relative z-10",children:"Pledge Complete!"}),e.jsx("p",{className:"text-muted-foreground text-sm mb-6 relative z-10 font-medium",children:"You're plastic-free today. Keep it up!"}),e.jsxs(H,{variant:"neomorph",className:"w-full h-12 text-emerald-600 font-bold uppercase tracking-widest relative z-10",onClick:o,children:[e.jsx(Tt,{className:"w-4 h-4 mr-2"}),"Share Milestone"]})]}):e.jsxs("div",{className:"neo-flat rounded-3xl p-8 text-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-primary/5 rounded-full -mr-16 -mt-16"}),e.jsx("div",{className:"relative z-10 w-20 h-20 neo-pressed rounded-full flex items-center justify-center mx-auto mb-4 ring-4 ring-primary/5",children:e.jsx(Ct,{className:"w-10 h-10 text-primary"})}),e.jsx("h3",{className:"text-2xl font-extrabold text-foreground mb-2 relative z-10",children:"Daily Pledge"}),e.jsx("p",{className:"text-muted-foreground text-sm mb-8 relative z-10 italic font-medium",children:'"I pledge to avoid single-use plastics today."'}),e.jsx(H,{variant:"neomorph-primary",size:"lg",className:"w-full h-16 text-lg font-bold uppercase tracking-widest relative z-10",onClick:d,disabled:r,children:r?e.jsx(Re,{className:"w-6 h-6 animate-spin"}):"I Pledge to be Plastic-Free!"})]})}function js(){const{profile:t}=xt(),a=()=>window.location.href="/login",{id:s}=gt(),{toast:r}=pt(),{triggerBadgeUnlock:n,triggerLevelUp:d}=ht(),[o,x]=l.useState(null),[c,u]=l.useState([]),[p,g]=l.useState([]),[w,m]=l.useState([]),[j,N]=l.useState([]),[v,T]=l.useState(null),[b,R]=l.useState(!1),[A,D]=l.useState(!0),C=!s||t&&t.id===s;l.useEffect(()=>{(async()=>{D(!0);try{const h=C?"/api/profiles/me":`/api/profiles/${s}`,k=await fetch(h);if(!k.ok)throw k.status,new Error("Profile not found");const f=await k.json();if(x(f),C){const[y,L,V,fe,ge]=await Promise.all([fetch("/api/profiles/me/badges"),fetch("/api/profiles/me/activity"),fetch("/api/badges"),fetch("/api/profiles/me/level-perks"),fetch("/api/streak")]);if(y.ok&&u(await y.json()),L.ok&&m(await L.json()),V.ok&&g(await V.json()),fe.ok){const et=await fe.json();N(et.perks||[])}ge.ok&&T(await ge.json())}else if(t){const y=await fetch(`/api/users/${t.id}/following`);if(y.ok){const L=await y.json();R(L.some(V=>V.id===s))}}}catch(h){console.error("Failed to load profile:",h)}finally{D(!1)}})()},[t,s,C]);const U=async()=>{if(!(!t||!s))try{const i=b?"DELETE":"POST";(await fetch(`/api/users/${s}/follow`,{method:i})).ok&&(R(!b),r({title:b?"Unfollowed":"Following",description:b?`You unfollowed ${$}`:`You are now following ${$}`}))}catch(i){console.error("Follow action failed",i),r({title:"Error",description:"Action failed. Please try again.",variant:"destructive"})}},Xe=async()=>{if(C)try{const i=await fetch("/api/streak/check-in",{method:"POST"}),h=await i.json();if(i.ok&&h.success){if(T(f=>({...f,streakDays:h.streakDays,streakFreezes:h.streakFreezes,status:"checked_in",history:[{activity_date:new Date().toISOString().split("T")[0],type:"check_in"},...f?.history||[]]})),h.newBadges&&h.newBadges.length>0){h.newBadges.forEach(y=>n(y));const f=await fetch("/api/profiles/me/badges");f.ok&&u(await f.json())}const k=await fetch("/api/profiles/me");if(k.ok){const f=await k.json();f.level>(o?.level||1)&&d(o?.level||1,f.level),x(f)}}}catch(i){console.error("Check-in failed",i)}},Ye={common:"bg-gray-500",uncommon:"bg-green-500",rare:"bg-blue-500",epic:"bg-purple-500",legendary:"bg-amber-500"},qe=["common","uncommon","rare","epic","legendary"],Je={common:{label:"Common",icon:W},uncommon:{label:"Uncommon",icon:je},rare:{label:"Rare",icon:be},epic:{label:"Epic",icon:X},legendary:{label:"Legendary",icon:Q}};if(!t&&C)return e.jsx("div",{className:"container mx-auto px-4 py-12",children:e.jsxs(_,{className:"max-w-md mx-auto",children:[e.jsx(E,{className:"text-center",children:e.jsx(S,{className:"text-2xl",children:"Sign in to view your profile"})}),e.jsxs(P,{className:"space-y-4",children:[e.jsx("p",{className:"text-center text-muted-foreground",children:"Track your sightings, earn badges, and contribute to ocean conservation"}),e.jsx(H,{onClick:()=>a(),className:"w-full",size:"lg",children:"Get Started"})]})]})});if(A)return e.jsx("div",{className:"container mx-auto px-4 py-12 flex justify-center",children:e.jsx(Re,{className:"h-8 w-8 animate-spin text-primary"})});if(!o)return e.jsx("div",{className:"container mx-auto px-4 py-12 text-center",children:e.jsx("h1",{className:"text-2xl font-bold",children:"Profile not found"})});const $=o.username||"User",Ke=o.avatar_url,K=o.level||1,xe=o.xp||0,{current:pe,required:he}=jt(xe,K),Qe=pe/he*100,ue=new Set(c.map(i=>i.badge_id)),me=i=>{const h=new Date(i),f=new Date().getTime()-h.getTime(),y=Math.floor(f/(1e3*60*60));if(y<1)return"Just now";if(y<24)return`${y}h ago`;const L=Math.floor(y/24);return L===1?"Yesterday":L<30?`${L}d ago`:h.toLocaleDateString()},We={sighting:Z,badge:W,level_up:ee,mission:ye,streak:se},Ze=qe.map(i=>{const h=p.filter(f=>f.rarity===i),k=h.filter(f=>ue.has(f.id));return{rarity:i,...Je[i],total:h.length,earned:k.length}}).filter(i=>i.total>0);return e.jsxs("div",{className:"container mx-auto px-4 py-8 pb-20 md:pb-8",children:[e.jsx("div",{className:"bg-secondary/90 border border-white/10 rounded-[3rem] overflow-hidden relative group shadow-[0_32px_64px_-16px_rgba(0,0,0,0.6)]",children:e.jsx(P,{className:"p-12 relative z-10",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-12",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(ut,{className:"w-40 h-40 border-8 border-white/5 shadow-2xl rounded-[2.5rem] overflow-hidden",children:[e.jsx(mt,{src:Ke||void 0,alt:$}),e.jsx(ft,{className:"text-6xl font-black bg-primary/20 text-white",children:$[0]?.toUpperCase()})]}),e.jsx("div",{className:"absolute -bottom-2 -right-2 w-12 h-12 bg-primary rounded-2xl flex items-center justify-center shadow-xl border-4 border-background",children:e.jsx(Q,{className:"text-white w-6 h-6"})})]}),e.jsxs("div",{className:"text-center md:text-left flex-1 py-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-6 mb-8",children:[e.jsx("h1",{className:"text-5xl md:text-6xl font-black text-white tracking-tighter",children:$}),e.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-4",children:[!C&&t&&e.jsxs(H,{size:"lg",className:"px-8 h-12 text-sm font-black uppercase tracking-widest bg-primary text-white",onClick:U,children:[b?e.jsx(Pt,{className:"w-5 h-5 mr-3"}):e.jsx(_t,{className:"w-5 h-5 mr-3"}),b?"Unfollow":"Follow"]}),C&&e.jsx(H,{size:"icon",variant:"ghost",className:"h-12 w-12 rounded-2xl bg-white/5 hover:bg-white/10",asChild:!0,children:e.jsx(wt,{to:"/settings",children:e.jsx(Et,{className:"w-6 h-6 text-primary"})})})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-center md:justify-start mb-10",children:[e.jsxs(I,{className:"bg-white/5 text-white border-white/10 px-5 py-2.5 text-xs font-black uppercase tracking-widest rounded-2xl flex items-center gap-2.5",children:[e.jsx(X,{className:"h-4 w-4 fill-primary text-primary"}),"Level ",K]}),e.jsxs(I,{className:"bg-white/5 text-white border-white/10 px-5 py-2.5 text-xs font-black uppercase tracking-widest rounded-2xl flex items-center gap-2.5",children:[e.jsx(se,{className:"h-4 w-4 text-orange-500"}),o.streak_days||0," Day Streak"]}),e.jsxs(I,{className:"bg-white/5 text-white border-white/10 px-5 py-2.5 text-xs font-black uppercase tracking-widest rounded-2xl flex items-center gap-2.5",children:[e.jsx(Z,{className:"h-4 w-4 text-primary"}),o.total_sightings||0," Sightings"]}),e.jsx(I,{className:"bg-primary/20 text-white border-none px-5 py-2.5 text-xs font-black uppercase tracking-widest rounded-2xl italic",children:o.role||"player"})]}),e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs("div",{className:"flex justify-between items-end text-[10px] mb-3 font-black uppercase tracking-[0.2em]",children:[e.jsx("span",{className:"text-white/60",children:"Guardian Progress"}),e.jsxs("span",{className:"text-primary brightness-125 font-black",children:[pe.toLocaleString()," / ",he.toLocaleString()," XP"]})]}),e.jsx("div",{className:"bg-black/30 p-1.5 rounded-full border border-white/5 overflow-hidden shadow-inner",children:e.jsx(Te,{value:Qe,className:"h-3 bg-transparent"})})]})]})]})})}),C?e.jsxs(vt,{defaultValue:"stats",className:"mt-12",children:[e.jsxs(bt,{className:"bg-black/20 p-2 rounded-[2rem] h-18 w-full mb-12 border border-white/5",children:[e.jsx(z,{value:"stats",className:"rounded-[1.5rem] h-14 text-white/60 font-black uppercase tracking-widest data-[state=active]:bg-primary data-[state=active]:text-white data-[state=active]:shadow-lg data-[state=active]:shadow-primary/30 transition-all flex-1",children:"Stats"}),e.jsx(z,{value:"streak",className:"rounded-[1.5rem] h-14 text-white/60 font-black uppercase tracking-widest data-[state=active]:bg-primary data-[state=active]:text-white data-[state=active]:shadow-lg data-[state=active]:shadow-primary/30 transition-all flex-1",children:"Streak"}),e.jsx(z,{value:"badges",className:"rounded-[1.5rem] h-14 text-white/60 font-black uppercase tracking-widest data-[state=active]:bg-primary data-[state=active]:text-white data-[state=active]:shadow-lg data-[state=active]:shadow-primary/30 transition-all flex-1",children:"Badges"}),e.jsx(z,{value:"perks",className:"rounded-[1.5rem] h-14 text-white/60 font-black uppercase tracking-widest data-[state=active]:bg-primary data-[state=active]:text-white data-[state=active]:shadow-lg data-[state=active]:shadow-primary/30 transition-all flex-1",children:"Perks"}),e.jsx(z,{value:"activity",className:"rounded-[1.5rem] h-14 text-white/60 font-black uppercase tracking-widest data-[state=active]:bg-primary data-[state=active]:text-white data-[state=active]:shadow-lg data-[state=active]:shadow-primary/30 transition-all flex-1",children:"Activity"})]}),e.jsxs(F,{value:"streak",className:"space-y-12",children:[e.jsx(us,{checkedIn:v?.status==="checked_in",onCheckIn:Xe,streakDays:v?.streakDays||0}),e.jsx(hs,{streakDays:v?.streakDays||0,streakFreezes:v?.streakFreezes||0}),e.jsx(ps,{history:v?.history||[]})]}),e.jsxs(F,{value:"stats",className:"space-y-12 pt-4",children:[e.jsxs("div",{className:"grid gap-8 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(_,{variant:"solid",className:"pt-8",children:[e.jsxs(E,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[e.jsx(S,{className:"text-[10px] font-black uppercase tracking-[0.2em] text-white/60",children:"Total XP"}),e.jsx(ee,{className:"h-5 w-5 text-primary brightness-125"})]}),e.jsxs(P,{children:[e.jsx("div",{className:"text-4xl font-black text-white tracking-tighter",children:xe.toLocaleString()}),e.jsxs("p",{className:"text-[10px] text-primary brightness-125 font-black mt-2 uppercase tracking-widest",children:["Level ",K," Guardian"]})]})]}),e.jsxs(_,{variant:"solid",className:"pt-8",children:[e.jsxs(E,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[e.jsx(S,{className:"text-[10px] font-black uppercase tracking-[0.2em] text-white/60",children:"Sightings"}),e.jsx(St,{className:"h-5 w-5 text-primary brightness-125"})]}),e.jsxs(P,{children:[e.jsx("div",{className:"text-4xl font-black text-white tracking-tighter",children:o?.total_sightings||0}),e.jsx("p",{className:"text-[10px] text-white/60 font-black mt-2 uppercase tracking-widest",children:"Marine observations"})]})]}),e.jsxs(_,{variant:"solid",className:"pt-8",children:[e.jsxs(E,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[e.jsx(S,{className:"text-[10px] font-black uppercase tracking-[0.2em] text-white/60",children:"Missions"}),e.jsx(ye,{className:"h-5 w-5 text-primary brightness-125"})]}),e.jsxs(P,{children:[e.jsx("div",{className:"text-4xl font-black text-white tracking-tighter",children:o?.total_missions||0}),e.jsx("p",{className:"text-[10px] text-white/60 font-black mt-2 uppercase tracking-widest",children:"Cleanups joined"})]})]}),e.jsxs(_,{variant:"solid",className:"pt-8",children:[e.jsxs(E,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[e.jsx(S,{className:"text-[10px] font-black uppercase tracking-[0.2em] text-white/60",children:"Badges"}),e.jsx(je,{className:"h-5 w-5 text-primary brightness-125"})]}),e.jsxs(P,{children:[e.jsxs("div",{className:"text-4xl font-black text-white tracking-tighter",children:[c.length," / ",p.length]}),e.jsx("p",{className:"text-[10px] text-white/60 font-black mt-2 uppercase tracking-widest",children:"Achievements earned"})]})]})]}),e.jsxs(_,{variant:"glass",className:"border-white/5",children:[e.jsx(E,{className:"pb-8",children:e.jsxs(S,{className:"text-xs font-black uppercase tracking-[0.3em] text-primary flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-2xl bg-white/5 border border-white/5",children:e.jsx(be,{className:"h-5 w-5 text-amber-500"})}),"Achievement Tiers"]})}),e.jsx(P,{className:"pb-12",children:e.jsx("div",{className:"space-y-8",children:Ze.map(i=>{const h=i.icon;return e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsxs("div",{className:"flex items-center gap-4 w-48",children:[e.jsx(h,{className:"h-5 w-5 text-primary"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-white",children:i.label})]}),e.jsx("div",{className:"flex-1 bg-black/20 p-1.5 rounded-full border border-white/5 overflow-hidden",children:e.jsx(Te,{value:i.total>0?i.earned/i.total*100:0,className:"h-2.5 bg-transparent"})}),e.jsxs("span",{className:"text-xs font-black text-primary w-24 text-right tracking-[0.1em]",children:[i.earned," / ",i.total]})]},i.rarity)})})})]})]}),e.jsx(F,{value:"badges",className:"pt-4",children:e.jsxs(_,{variant:"solid",children:[e.jsx(E,{className:"pb-10",children:e.jsxs(S,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-2xl bg-white/5 border border-white/5",children:e.jsx(W,{className:"h-5 w-5 text-primary"})}),e.jsx("span",{className:"text-xs font-black uppercase tracking-[0.3em] text-primary",children:"Achievement Collection"})]}),e.jsxs(I,{variant:"neomorph",className:"px-6 py-2.5 font-black text-[10px] uppercase tracking-widest bg-primary/20 text-white border-none",children:[c.length," / ",p.length," Earned"]})]})}),e.jsx(P,{className:"pb-14",children:p.length===0?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"w-20 h-20 bg-white/5 rounded-3xl flex items-center justify-center mx-auto mb-6 border border-white/5",children:e.jsx(X,{className:"h-10 w-10 text-white/20"})}),e.jsx("p",{className:"text-white/40 font-black uppercase tracking-widest text-xs italic",children:"No badges available yet. New achievements coming soon!"})]}):e.jsx(Ve,{children:e.jsx("div",{className:"grid grid-cols-2 xs:grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-8",children:p.map(i=>{const h=ue.has(i.id),k=c.find(y=>y.badge_id===i.id),f=i.rarity;return e.jsxs(cs,{children:[e.jsx(ds,{asChild:!0,children:e.jsxs("div",{className:`
                                    relative flex flex-col items-center gap-4 p-8 rounded-[2.5rem] border transition-all duration-500 cursor-default group/badge
                                    ${h?"bg-white/5 border-white/10 hover:bg-white/10 hover:scale-105 transition-all shadow-xl":"border-dashed border-white/5 bg-black/20 opacity-30 grayscale"}
                                `,children:[e.jsx("div",{className:"w-20 h-20 flex items-center justify-center transition-transform duration-500 group-hover/badge:scale-110",children:e.jsx("span",{className:"text-5xl drop-shadow-2xl",children:i.is_hidden&&!h?e.jsx(te,{className:"w-10 h-10 text-white/30"}):i.icon})}),e.jsx("p",{className:"text-[10px] font-black text-center leading-tight truncate w-full uppercase tracking-widest text-white/90",children:i.is_hidden&&!h?"Hidden":i.name}),e.jsx(I,{className:`text-[8px] px-3 py-1 border-none uppercase font-black tracking-widest ${h?Ye[f]+" text-white shadow-lg":"bg-white/5 text-white/30"}`,children:f}),!h&&e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx(te,{className:"h-4 w-4 text-white/10"})})]})}),e.jsxs(xs,{className:"max-w-[240px] p-5 rounded-3xl glass-liquid border-white/10 shadow-2xl",children:[e.jsx("p",{className:"font-black text-white text-xs uppercase tracking-widest mb-2",children:i.is_hidden&&!h?"Hidden Badge":i.name}),e.jsx("p",{className:"text-[10px] text-white/60 leading-relaxed font-bold italic",children:i.is_hidden&&!h?"Complete the secret requirement to unlock!":i.description}),h&&k&&e.jsxs("div",{className:"flex items-center gap-2 mt-4 text-[10px] text-primary brightness-125 font-black uppercase tracking-widest",children:[e.jsx(Rt,{className:"h-4 w-4"}),e.jsxs("span",{children:["Earned ",me(k.earned_at)]})]})]})]},i.id)})})})})]})}),e.jsx(F,{value:"perks",className:"pt-4",children:e.jsxs(_,{variant:"solid",children:[e.jsx(E,{className:"pb-10",children:e.jsxs(S,{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-2xl bg-white/5 border border-white/5",children:e.jsx(X,{className:"h-5 w-5 text-amber-500"})}),e.jsx("span",{className:"text-xs font-black uppercase tracking-[0.3em] text-primary",children:"Guardian Level Perks"})]})}),e.jsx(P,{className:"pb-14 px-10",children:e.jsx("div",{className:"grid gap-6",children:j.map(i=>e.jsxs("div",{className:`
                        flex items-center gap-6 p-6 rounded-3xl border transition-all duration-300 group
                        ${i.unlocked?"bg-white/10 border-white/10 shadow-xl shadow-primary/5":"bg-black/20 border-white/5 opacity-40 grayscale"}
                        `,children:[e.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center text-3xl transition-transform duration-500 group-hover:scale-110 ${i.unlocked?"bg-primary/20 shadow-lg shadow-primary/20":"bg-white/5"}`,children:i.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("p",{className:`font-black tracking-tight ${i.unlocked?"text-white":"text-white/40"}`,children:i.title}),e.jsxs(I,{variant:"outline",className:"text-[8px] font-black uppercase tracking-widest border-white/10 text-primary/80",children:["Level ",i.level]})]}),e.jsx("p",{className:`text-xs font-bold leading-relaxed italic ${i.unlocked?"text-white/60":"text-white/20"}`,children:i.description})]}),i.unlocked?e.jsx("div",{className:"p-3 rounded-full bg-primary/20",children:e.jsx(Q,{className:"h-6 w-6 text-primary brightness-150"})}):e.jsx("div",{className:"p-3 rounded-full bg-white/5",children:e.jsx(te,{className:"h-6 w-6 text-white/20"})})]},i.level))})})]})}),e.jsx(F,{value:"activity",className:"pt-4",children:e.jsxs(_,{variant:"glass",className:"border-white/5",children:[e.jsx(E,{className:"pb-10",children:e.jsxs(S,{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-2xl bg-white/5 border border-white/5",children:e.jsx(Dt,{className:"h-5 w-5 text-primary"})}),e.jsx("span",{className:"text-xs font-black uppercase tracking-[0.3em] text-primary",children:"Guardian Journey Log"})]})}),e.jsx(P,{className:"pb-14 px-10",children:w.length===0?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"w-20 h-20 bg-white/5 rounded-3xl flex items-center justify-center mx-auto mb-6 border border-white/5",children:e.jsx(Lt,{className:"h-10 w-10 text-white/20"})}),e.jsx("p",{className:"text-white/40 font-black uppercase tracking-widest text-xs italic",children:"Your journey log is empty. Submit your first sighting to begin your hero story!"})]}):e.jsx("div",{className:"space-y-6",children:w.map(i=>{const h=We[i.type]||Z;return e.jsxs("div",{className:"flex items-center justify-between p-6 rounded-3xl border border-white/5 bg-white/5 hover:bg-white/10 transition-all duration-300 group shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-6 flex-1",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-white/10 flex items-center justify-center transition-all group-hover:scale-110",children:e.jsx(h,{className:"h-7 w-7 text-primary"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(I,{variant:"neomorph",className:"capitalize text-[8px] bg-primary/20 text-white border-none font-black tracking-widest px-3 py-1",children:i.type.replace("_"," ")}),e.jsx("span",{className:"text-[10px] font-black text-white/30 uppercase tracking-[0.2em] italic",children:me(i.created_at)})]}),e.jsx("p",{className:"mt-2 text-sm font-bold text-white tracking-tight",children:i.description})]})]}),i.xp_earned>0&&e.jsxs("div",{className:"flex items-center gap-2 bg-primary/20 px-4 py-2 rounded-2xl border border-primary/20 shadow-lg shadow-primary/10",children:[e.jsx(ee,{className:"h-4 w-4 text-primary brightness-150"}),e.jsxs("span",{className:"font-black text-xs text-white tracking-widest",children:["+",i.xp_earned," XP"]})]})]},i.id)})})})]})})]}):e.jsx("div",{className:"mt-8 text-center text-muted-foreground",children:e.jsx("p",{children:"Detailed stats and activity are private."})})]})}export{js as default};
