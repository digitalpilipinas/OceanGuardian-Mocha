import{j as e,t as ze,v as Be,R as Fe,w as de,x as He,P as $e,y as I,z as xe,E as Ue,F as Ge,G as ue,H as Ye,I as Xe,J as qe,K as Ve,L as Je,s as me,m as oe,g as H,u as Ke,k as We,i as Ze,C as P,a as R,b as S,c as E,A as Qe,d as et,e as tt,B as _}from"./index-Fy2jmMwR.js";import{r as i,f as st,L as rt}from"./vendor-DvMla3zT.js";import{P as le,x as at}from"./types-wViNxkcd.js";import{T as nt,a as ot,b as B,c as F}from"./tabs-CuNhbUQy.js";import{R as ie,V as lt,Y as he,X as it,j as pe,H as ct,g as dt,Z as xt,E as fe,_ as ut,U as mt,S as ht,l as pt,f as ft,J as gt,b as vt,A as jt,h as bt,$ as ce,k as wt,e as yt}from"./ui-BFD__GsY.js";import"./maps-DK6RsE9k.js";var[X]=Ve("Tooltip",[ue]),q=ue(),ge="TooltipProvider",Nt=700,K="tooltip.open",[kt,Z]=X(ge),ve=s=>{const{__scopeTooltip:r,delayDuration:t=Nt,skipDelayDuration:a=300,disableHoverableContent:n=!1,children:c}=s,l=i.useRef(!0),m=i.useRef(!1),d=i.useRef(0);return i.useEffect(()=>{const p=d.current;return()=>window.clearTimeout(p)},[]),e.jsx(kt,{scope:r,isOpenDelayedRef:l,delayDuration:t,onOpen:i.useCallback(()=>{window.clearTimeout(d.current),l.current=!1},[]),onClose:i.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>l.current=!0,a)},[a]),isPointerInTransitRef:m,onPointerInTransitChange:i.useCallback(p=>{m.current=p},[]),disableHoverableContent:n,children:c})};ve.displayName=ge;var $="Tooltip",[Tt,U]=X($),je=s=>{const{__scopeTooltip:r,children:t,open:a,defaultOpen:n,onOpenChange:c,disableHoverableContent:l,delayDuration:m}=s,d=Z($,s.__scopeTooltip),p=q(r),[x,g]=i.useState(null),j=ze(),f=i.useRef(0),w=l??d.disableHoverableContent,N=m??d.delayDuration,b=i.useRef(!1),[T,v]=Be({prop:a,defaultProp:n??!1,onChange:G=>{G?(d.onOpen(),document.dispatchEvent(new CustomEvent(K))):d.onClose(),c?.(G)},caller:$}),D=i.useMemo(()=>T?b.current?"delayed-open":"instant-open":"closed",[T]),O=i.useCallback(()=>{window.clearTimeout(f.current),f.current=0,b.current=!1,v(!0)},[v]),L=i.useCallback(()=>{window.clearTimeout(f.current),f.current=0,v(!1)},[v]),C=i.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{b.current=!0,v(!0),f.current=0},N)},[N,v]);return i.useEffect(()=>()=>{f.current&&(window.clearTimeout(f.current),f.current=0)},[]),e.jsx(Fe,{...p,children:e.jsx(Tt,{scope:r,contentId:j,open:T,stateAttribute:D,trigger:x,onTriggerChange:g,onTriggerEnter:i.useCallback(()=>{d.isOpenDelayedRef.current?C():O()},[d.isOpenDelayedRef,C,O]),onTriggerLeave:i.useCallback(()=>{w?L():(window.clearTimeout(f.current),f.current=0)},[L,w]),onOpen:O,onClose:L,disableHoverableContent:w,children:t})})};je.displayName=$;var W="TooltipTrigger",be=i.forwardRef((s,r)=>{const{__scopeTooltip:t,...a}=s,n=U(W,t),c=Z(W,t),l=q(t),m=i.useRef(null),d=de(r,m,n.onTriggerChange),p=i.useRef(!1),x=i.useRef(!1),g=i.useCallback(()=>p.current=!1,[]);return i.useEffect(()=>()=>document.removeEventListener("pointerup",g),[g]),e.jsx(He,{asChild:!0,...l,children:e.jsx($e.button,{"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute,...a,ref:d,onPointerMove:I(s.onPointerMove,j=>{j.pointerType!=="touch"&&!x.current&&!c.isPointerInTransitRef.current&&(n.onTriggerEnter(),x.current=!0)}),onPointerLeave:I(s.onPointerLeave,()=>{n.onTriggerLeave(),x.current=!1}),onPointerDown:I(s.onPointerDown,()=>{n.open&&n.onClose(),p.current=!0,document.addEventListener("pointerup",g,{once:!0})}),onFocus:I(s.onFocus,()=>{p.current||n.onOpen()}),onBlur:I(s.onBlur,n.onClose),onClick:I(s.onClick,n.onClose)})})});be.displayName=W;var Q="TooltipPortal",[Ct,Pt]=X(Q,{forceMount:void 0}),we=s=>{const{__scopeTooltip:r,forceMount:t,children:a,container:n}=s,c=U(Q,r);return e.jsx(Ct,{scope:r,forceMount:t,children:e.jsx(xe,{present:t||c.open,children:e.jsx(Ue,{asChild:!0,container:n,children:a})})})};we.displayName=Q;var M="TooltipContent",ye=i.forwardRef((s,r)=>{const t=Pt(M,s.__scopeTooltip),{forceMount:a=t.forceMount,side:n="top",...c}=s,l=U(M,s.__scopeTooltip);return e.jsx(xe,{present:a||l.open,children:l.disableHoverableContent?e.jsx(Ne,{side:n,...c,ref:r}):e.jsx(Et,{side:n,...c,ref:r})})}),Et=i.forwardRef((s,r)=>{const t=U(M,s.__scopeTooltip),a=Z(M,s.__scopeTooltip),n=i.useRef(null),c=de(r,n),[l,m]=i.useState(null),{trigger:d,onClose:p}=t,x=n.current,{onPointerInTransitChange:g}=a,j=i.useCallback(()=>{m(null),g(!1)},[g]),f=i.useCallback((w,N)=>{const b=w.currentTarget,T={x:w.clientX,y:w.clientY},v=Dt(T,b.getBoundingClientRect()),D=Lt(T,v),O=At(N.getBoundingClientRect()),L=It([...D,...O]);m(L),g(!0)},[g]);return i.useEffect(()=>()=>j(),[j]),i.useEffect(()=>{if(d&&x){const w=b=>f(b,x),N=b=>f(b,d);return d.addEventListener("pointerleave",w),x.addEventListener("pointerleave",N),()=>{d.removeEventListener("pointerleave",w),x.removeEventListener("pointerleave",N)}}},[d,x,f,j]),i.useEffect(()=>{if(l){const w=N=>{const b=N.target,T={x:N.clientX,y:N.clientY},v=d?.contains(b)||x?.contains(b),D=!Ot(T,l);v?j():D&&(j(),p())};return document.addEventListener("pointermove",w),()=>document.removeEventListener("pointermove",w)}},[d,x,l,p,j]),e.jsx(Ne,{...s,ref:c})}),[_t,Rt]=X($,{isInside:!1}),St=Je("TooltipContent"),Ne=i.forwardRef((s,r)=>{const{__scopeTooltip:t,children:a,"aria-label":n,onEscapeKeyDown:c,onPointerDownOutside:l,...m}=s,d=U(M,t),p=q(t),{onClose:x}=d;return i.useEffect(()=>(document.addEventListener(K,x),()=>document.removeEventListener(K,x)),[x]),i.useEffect(()=>{if(d.trigger){const g=j=>{j.target?.contains(d.trigger)&&x()};return window.addEventListener("scroll",g,{capture:!0}),()=>window.removeEventListener("scroll",g,{capture:!0})}},[d.trigger,x]),e.jsx(Ye,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:c,onPointerDownOutside:l,onFocusOutside:g=>g.preventDefault(),onDismiss:x,children:e.jsxs(Xe,{"data-state":d.stateAttribute,...p,...m,ref:r,style:{...m.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(St,{children:a}),e.jsx(_t,{scope:t,isInside:!0,children:e.jsx(qe,{id:d.contentId,role:"tooltip",children:n||a})})]})})});ye.displayName=M;var ke="TooltipArrow",Te=i.forwardRef((s,r)=>{const{__scopeTooltip:t,...a}=s,n=q(t);return Rt(ke,t).isInside?null:e.jsx(Ge,{...n,...a,ref:r})});Te.displayName=ke;function Dt(s,r){const t=Math.abs(r.top-s.y),a=Math.abs(r.bottom-s.y),n=Math.abs(r.right-s.x),c=Math.abs(r.left-s.x);switch(Math.min(t,a,n,c)){case c:return"left";case n:return"right";case t:return"top";case a:return"bottom";default:throw new Error("unreachable")}}function Lt(s,r,t=5){const a=[];switch(r){case"top":a.push({x:s.x-t,y:s.y+t},{x:s.x+t,y:s.y+t});break;case"bottom":a.push({x:s.x-t,y:s.y-t},{x:s.x+t,y:s.y-t});break;case"left":a.push({x:s.x+t,y:s.y-t},{x:s.x+t,y:s.y+t});break;case"right":a.push({x:s.x-t,y:s.y-t},{x:s.x-t,y:s.y+t});break}return a}function At(s){const{top:r,right:t,bottom:a,left:n}=s;return[{x:n,y:r},{x:t,y:r},{x:t,y:a},{x:n,y:a}]}function Ot(s,r){const{x:t,y:a}=s;let n=!1;for(let c=0,l=r.length-1;c<r.length;l=c++){const m=r[c],d=r[l],p=m.x,x=m.y,g=d.x,j=d.y;x>a!=j>a&&t<(g-p)*(a-x)/(j-x)+p&&(n=!n)}return n}function It(s){const r=s.slice();return r.sort((t,a)=>t.x<a.x?-1:t.x>a.x?1:t.y<a.y?-1:t.y>a.y?1:0),Mt(r)}function Mt(s){if(s.length<=1)return s.slice();const r=[];for(let a=0;a<s.length;a++){const n=s[a];for(;r.length>=2;){const c=r[r.length-1],l=r[r.length-2];if((c.x-l.x)*(n.y-l.y)>=(c.y-l.y)*(n.x-l.x))r.pop();else break}r.push(n)}r.pop();const t=[];for(let a=s.length-1;a>=0;a--){const n=s[a];for(;t.length>=2;){const c=t[t.length-1],l=t[t.length-2];if((c.x-l.x)*(n.y-l.y)>=(c.y-l.y)*(n.x-l.x))t.pop();else break}t.push(n)}return t.pop(),r.length===1&&t.length===1&&r[0].x===t[0].x&&r[0].y===t[0].y?r:r.concat(t)}var zt=ve,Bt=je,Ft=be,Ht=we,$t=ye,Ut=Te;function Ce({delayDuration:s=0,...r}){return e.jsx(zt,{"data-slot":"tooltip-provider",delayDuration:s,...r})}function Gt({...s}){return e.jsx(Ce,{children:e.jsx(Bt,{"data-slot":"tooltip",...s})})}function Yt({...s}){return e.jsx(Ft,{"data-slot":"tooltip-trigger",...s})}function Xt({className:s,sideOffset:r=0,children:t,...a}){return e.jsx(Ht,{children:e.jsxs($t,{"data-slot":"tooltip-content",sideOffset:r,className:me("data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=open]:zoom-in-95 data-[state=delayed-open]:animate-in data-[state=delayed-open]:fade-in-0 data-[state=delayed-open]:zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 rounded-2xl px-3 py-1.5 text-xs [&_[data-slot=kbd]]:rounded-4xl bg-foreground text-background z-50 w-fit max-w-xs origin-[--radix-tooltip-content-transform-origin]",s),...a,children:[t,e.jsx(Ut,{className:"size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px] bg-foreground fill-foreground z-50 translate-y-[calc(-50%_-_2px)]"})]})})}function qt({history:s}){const r=i.useMemo(()=>{const t=[],a=new Date,n=new Map(s.map(c=>[c.activity_date,c.type]));for(let c=29;c>=0;c--){const l=new Date(a);l.setDate(l.getDate()-c);const m=l.toISOString().split("T")[0],d=n.get(m);t.push({date:m,dayOfMonth:l.getDate(),type:d||(c===0?"future":"missed"),isToday:c===0})}return t},[s]);return e.jsxs("div",{className:"bg-white/5 backdrop-blur-sm rounded-xl p-4 border border-white/10",children:[e.jsx("h3",{className:"text-sm font-medium text-slate-300 mb-3",children:"Last 30 Days"}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:r.map(t=>{let a="bg-slate-800/50 text-slate-600 border-slate-700/50",n=ie;return t.type==="check_in"?(a="bg-emerald-500/20 text-emerald-400 border-emerald-500/30",n=lt):t.type==="freeze"?(a="bg-blue-500/20 text-blue-400 border-blue-500/30",n=he):t.type==="missed"&&!t.isToday?(a="bg-red-500/10 text-red-400/50 border-red-500/20",n=it):t.isToday&&!t.type&&(a="bg-slate-800 text-slate-500 border-slate-700 border-dashed animate-pulse",n=ie),e.jsxs("div",{className:me("aspect-square rounded-lg border flex flex-col items-center justify-center relative",a),title:`${t.date}: ${t.type||"pending"}`,children:[e.jsx("span",{className:"text-[10px] absolute top-1 right-1 opacity-50",children:t.dayOfMonth}),e.jsx(n,{className:"w-4 h-4"})]},t.date)})})]})}function Vt({streakDays:s,streakFreezes:r}){return e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-8",children:[e.jsxs(oe.div,{whileHover:{y:-5},className:"neo-flat rounded-3xl p-6 flex items-center justify-between group overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-orange-500/5 rounded-full -mr-8 -mt-8 transition-transform group-hover:scale-110"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"text-4xl font-extrabold text-orange-500",children:s}),e.jsx("div",{className:"text-xs text-muted-foreground uppercase tracking-widest font-bold mt-1",children:"Current Streak"})]}),e.jsx("div",{className:"relative z-10 w-16 h-16 rounded-2xl neo-pressed flex items-center justify-center",children:e.jsx(pe,{className:"w-8 h-8 text-orange-500 fill-orange-500/10 animate-pulse"})})]}),e.jsxs(oe.div,{whileHover:{y:-5},className:"neo-flat rounded-3xl p-6 flex items-center justify-between group overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-blue-500/5 rounded-full -mr-8 -mt-8 transition-transform group-hover:scale-110"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"text-4xl font-extrabold text-blue-500",children:r}),e.jsx("div",{className:"text-xs text-muted-foreground uppercase tracking-widest font-bold mt-1",children:"Freezes Left"})]}),e.jsx("div",{className:"relative z-10 w-16 h-16 rounded-2xl neo-pressed flex items-center justify-center",children:e.jsx(he,{className:"w-8 h-8 text-blue-500 fill-blue-500/10"})})]})]})}function Jt({checkedIn:s,onCheckIn:r,streakDays:t}){const[a,n]=i.useState(!1),c=async()=>{n(!0);try{await r()}finally{n(!1)}},l=async()=>{const m=`I'm on a ${t}-day Plastic-Free Streak on OceanGuardian! Join me in protecting our oceans. ðŸŒŠðŸ”¥`;if(navigator.share)try{await navigator.share({title:"Plastic-Free Streak",text:m,url:window.location.origin})}catch(d){console.error("Share failed",d)}else await navigator.clipboard.writeText(m),alert("Copied directly to clipboard!")};return s?e.jsxs("div",{className:"neo-flat rounded-3xl p-8 text-center animate-in fade-in zoom-in duration-500 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-32 h-32 bg-emerald-500/5 rounded-full -ml-16 -mt-16"}),e.jsx("div",{className:"relative z-10 w-20 h-20 neo-pressed rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ct,{className:"w-10 h-10 text-emerald-500"})}),e.jsx("h3",{className:"text-2xl font-bold text-foreground mb-1 relative z-10",children:"Pledge Complete!"}),e.jsx("p",{className:"text-muted-foreground text-sm mb-6 relative z-10 font-medium",children:"You're plastic-free today. Keep it up!"}),e.jsxs(H,{variant:"neomorph",className:"w-full h-12 text-emerald-600 font-bold uppercase tracking-widest relative z-10",onClick:l,children:[e.jsx(dt,{className:"w-4 h-4 mr-2"}),"Share Milestone"]})]}):e.jsxs("div",{className:"neo-flat rounded-3xl p-8 text-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-primary/5 rounded-full -mr-16 -mt-16"}),e.jsx("div",{className:"relative z-10 w-20 h-20 neo-pressed rounded-full flex items-center justify-center mx-auto mb-4 ring-4 ring-primary/5",children:e.jsx(xt,{className:"w-10 h-10 text-primary"})}),e.jsx("h3",{className:"text-2xl font-extrabold text-foreground mb-2 relative z-10",children:"Daily Pledge"}),e.jsx("p",{className:"text-muted-foreground text-sm mb-8 relative z-10 italic font-medium",children:'"I pledge to avoid single-use plastics today."'}),e.jsx(H,{variant:"neomorph-primary",size:"lg",className:"w-full h-16 text-lg font-bold uppercase tracking-widest relative z-10",onClick:c,disabled:a,children:a?e.jsx(fe,{className:"w-6 h-6 animate-spin"}):"I Pledge to be Plastic-Free!"})]})}function ss(){const{profile:s}=Ke(),r=()=>window.location.href="/login",{id:t}=st(),{toast:a}=We(),{triggerBadgeUnlock:n,triggerLevelUp:c}=Ze(),[l,m]=i.useState(null),[d,p]=i.useState([]),[x,g]=i.useState([]),[j,f]=i.useState([]),[w,N]=i.useState([]),[b,T]=i.useState(null),[v,D]=i.useState(!1),[O,L]=i.useState(!0),C=!t||s&&s.id===t;i.useEffect(()=>{(async()=>{L(!0);try{const u=C?"/api/profiles/me":`/api/profiles/${t}`,k=await fetch(u);if(!k.ok)throw k.status,new Error("Profile not found");const h=await k.json();if(m(h),C){const[y,A,Y,ae,ne]=await Promise.all([fetch("/api/profiles/me/badges"),fetch("/api/profiles/me/activity"),fetch("/api/badges"),fetch("/api/profiles/me/level-perks"),fetch("/api/streak")]);if(y.ok&&p(await y.json()),A.ok&&f(await A.json()),Y.ok&&g(await Y.json()),ae.ok){const Me=await ae.json();N(Me.perks||[])}ne.ok&&T(await ne.json())}else if(s){const y=await fetch(`/api/users/${s.id}/following`);if(y.ok){const A=await y.json();D(A.some(Y=>Y.id===t))}}}catch(u){console.error("Failed to load profile:",u)}finally{L(!1)}})()},[s,t,C]);const G=async()=>{if(!(!s||!t))try{const o=v?"DELETE":"POST";(await fetch(`/api/users/${t}/follow`,{method:o})).ok&&(D(!v),a({title:v?"Unfollowed":"Following",description:v?`You unfollowed ${z}`:`You are now following ${z}`}))}catch(o){console.error("Follow action failed",o),a({title:"Error",description:"Action failed. Please try again.",variant:"destructive"})}},Pe=async()=>{if(C)try{const o=await fetch("/api/streak/check-in",{method:"POST"}),u=await o.json();if(o.ok&&u.success){if(T(h=>({...h,streakDays:u.streakDays,streakFreezes:u.streakFreezes,status:"checked_in",history:[{activity_date:new Date().toISOString().split("T")[0],type:"check_in"},...h?.history||[]]})),u.newBadges&&u.newBadges.length>0){u.newBadges.forEach(y=>n(y));const h=await fetch("/api/profiles/me/badges");h.ok&&p(await h.json())}const k=await fetch("/api/profiles/me");if(k.ok){const h=await k.json();h.level>(l?.level||1)&&c(l?.level||1,h.level),m(h)}}}catch(o){console.error("Check-in failed",o)}},Ee={common:"bg-gray-500",uncommon:"bg-green-500",rare:"bg-blue-500",epic:"bg-purple-500",legendary:"bg-amber-500"},_e={common:"border-gray-300 dark:border-gray-600",uncommon:"border-green-300 dark:border-green-600",rare:"border-blue-300 dark:border-blue-600",epic:"border-purple-300 dark:border-purple-600",legendary:"border-amber-300 dark:border-amber-600"},Re={common:"",uncommon:"shadow-green-200/50 dark:shadow-green-800/30",rare:"shadow-blue-200/50 dark:shadow-blue-800/30",epic:"shadow-purple-200/50 dark:shadow-purple-800/30",legendary:"shadow-amber-200/50 dark:shadow-amber-800/30"},Se=["common","uncommon","rare","epic","legendary"],De={common:"ðŸ¥‰ Common",uncommon:"ðŸ¥ˆ Uncommon",rare:"ðŸ’Ž Rare",epic:"ðŸ‘‘ Epic",legendary:"â­ Legendary"};if(!s&&C)return e.jsx("div",{className:"container mx-auto px-4 py-12",children:e.jsxs(P,{className:"max-w-md mx-auto",children:[e.jsx(R,{className:"text-center",children:e.jsx(S,{className:"text-2xl",children:"Sign in to view your profile"})}),e.jsxs(E,{className:"space-y-4",children:[e.jsx("p",{className:"text-center text-muted-foreground",children:"Track your sightings, earn badges, and contribute to ocean conservation"}),e.jsx(H,{onClick:()=>r(),className:"w-full",size:"lg",children:"Get Started"})]})]})});if(O)return e.jsx("div",{className:"container mx-auto px-4 py-12 flex justify-center",children:e.jsx(fe,{className:"h-8 w-8 animate-spin text-primary"})});if(!l)return e.jsx("div",{className:"container mx-auto px-4 py-12 text-center",children:e.jsx("h1",{className:"text-2xl font-bold",children:"Profile not found"})});const z=l.username||"User",Le=l.avatar_url,V=l.level||1,J=l.xp||0,{current:ee,required:te}=at(J,V),Ae=ee/te*100,se=new Set(d.map(o=>o.badge_id)),re=o=>{const u=new Date(o),h=new Date().getTime()-u.getTime(),y=Math.floor(h/(1e3*60*60));if(y<1)return"Just now";if(y<24)return`${y}h ago`;const A=Math.floor(y/24);return A===1?"Yesterday":A<30?`${A}d ago`:u.toLocaleDateString()},Oe={sighting:"ðŸ“",badge:"ðŸ…",level_up:"â¬†ï¸",mission:"ðŸŽ¯",streak:"ðŸ”¥"},Ie=Se.map(o=>{const u=x.filter(h=>h.rarity===o),k=u.filter(h=>se.has(h.id));return{rarity:o,label:De[o],total:u.length,earned:k.length}}).filter(o=>o.total>0);return e.jsxs("div",{className:"container mx-auto px-4 py-8 pb-20 md:pb-8",children:[e.jsxs(P,{className:"bg-gradient-to-br from-blue-500 to-cyan-500 text-white border-0 overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/5 rounded-full -translate-y-12 translate-x-12"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white/5 rounded-full translate-y-8 -translate-x-8"}),e.jsx(E,{className:"p-8 relative",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6",children:[e.jsxs(Qe,{className:"w-24 h-24 border-4 border-white/20 shadow-lg",children:[e.jsx(et,{src:Le||void 0,alt:z}),e.jsx(tt,{className:"text-4xl font-bold bg-white/20 text-white",children:z[0]?.toUpperCase()})]}),e.jsxs("div",{className:"text-center md:text-left flex-1",children:[e.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-4 mb-2",children:[e.jsx("h1",{className:"text-3xl font-bold",children:z}),!C&&s&&e.jsxs(H,{size:"sm",variant:v?"secondary":"default",className:v?"bg-white/20 text-white hover:bg-white/30 border-white/40":"bg-white text-blue-600 hover:bg-blue-50",onClick:G,children:[v?e.jsx(ut,{className:"w-4 h-4 mr-1"}):e.jsx(mt,{className:"w-4 h-4 mr-1"}),v?"Unfollow":"Follow"]}),C&&e.jsx(H,{size:"icon",variant:"ghost",className:"text-white hover:bg-white/20",asChild:!0,children:e.jsx(rt,{to:"/settings",children:e.jsx(ht,{className:"w-5 h-5"})})})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 justify-center md:justify-start",children:[e.jsxs(_,{variant:"secondary",className:"bg-white/20 text-white border-white/30",children:["Level ",V]}),e.jsxs(_,{variant:"secondary",className:"bg-white/20 text-white border-white/30",children:[e.jsx(pe,{className:"mr-1 h-3 w-3"}),l.streak_days||0," day streak"]}),e.jsxs(_,{variant:"secondary",className:"bg-white/20 text-white border-white/30",children:[e.jsx(pt,{className:"mr-1 h-3 w-3"}),l.total_sightings||0," sightings"]}),e.jsx(_,{variant:"secondary",className:"bg-white/20 text-white border-white/30 capitalize",children:l.role||"player"}),l.country&&e.jsx(_,{variant:"secondary",className:"bg-white/20 text-white border-white/30",children:l.country})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Level Progress"}),e.jsxs("span",{children:[ee," / ",te," XP"]})]}),e.jsx(le,{value:Ae,className:"h-2 bg-white/20"}),e.jsxs("p",{className:"text-xs mt-1 opacity-80",children:["Total: ",J," XP"]})]})]})]})})]}),C?e.jsxs(nt,{defaultValue:"stats",className:"mt-6",children:[e.jsxs(ot,{className:"grid w-full grid-cols-5",children:[e.jsx(B,{value:"stats",children:"Stats"}),e.jsx(B,{value:"streak",children:"Streak"}),e.jsx(B,{value:"badges",children:"Badges"}),e.jsx(B,{value:"perks",children:"Perks"}),e.jsx(B,{value:"activity",children:"Activity"})]}),e.jsxs(F,{value:"streak",className:"space-y-6",children:[e.jsx(Jt,{checkedIn:b?.status==="checked_in",onCheckIn:Pe,streakDays:b?.streakDays||0}),e.jsx(Vt,{streakDays:b?.streakDays||0,streakFreezes:b?.streakFreezes||0}),e.jsx(qt,{history:b?.history||[]})]}),e.jsxs(F,{value:"stats",className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(P,{children:[e.jsxs(R,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(S,{className:"text-sm font-medium",children:"Total XP"}),e.jsx(ft,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(E,{children:[e.jsx("div",{className:"text-2xl font-bold",children:J.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Level ",V]})]})]}),e.jsxs(P,{children:[e.jsxs(R,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(S,{className:"text-sm font-medium",children:"Sightings"}),e.jsx(gt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(E,{children:[e.jsx("div",{className:"text-2xl font-bold",children:l?.total_sightings||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Marine observations"})]})]}),e.jsxs(P,{children:[e.jsxs(R,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(S,{className:"text-sm font-medium",children:"Missions"}),e.jsx(vt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(E,{children:[e.jsx("div",{className:"text-2xl font-bold",children:l?.total_missions||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Cleanups joined"})]})]}),e.jsxs(P,{children:[e.jsxs(R,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(S,{className:"text-sm font-medium",children:"Badges"}),e.jsx(jt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(E,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[d.length," / ",x.length]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Achievements earned"})]})]})]}),e.jsxs(P,{children:[e.jsx(R,{children:e.jsxs(S,{className:"text-lg flex items-center gap-2",children:[e.jsx(bt,{className:"h-5 w-5 text-amber-500"}),"Achievement Tiers"]})}),e.jsx(E,{children:e.jsx("div",{className:"space-y-3",children:Ie.map(o=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm font-medium w-28",children:o.label}),e.jsx("div",{className:"flex-1",children:e.jsx(le,{value:o.total>0?o.earned/o.total*100:0,className:"h-2"})}),e.jsxs("span",{className:"text-sm text-muted-foreground w-12 text-right",children:[o.earned,"/",o.total]})]},o.rarity))})})]})]}),e.jsx(F,{value:"badges",children:e.jsxs(P,{children:[e.jsx(R,{children:e.jsxs(S,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"All Badges"}),e.jsxs(_,{variant:"secondary",children:[d.length," / ",x.length," Earned"]})]})}),e.jsx(E,{children:x.length===0?e.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No badges available yet. ðŸŒŠ"}):e.jsx(Ce,{children:e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-3",children:x.map(o=>{const u=se.has(o.id),k=d.find(y=>y.badge_id===o.id),h=o.rarity;return e.jsxs(Gt,{children:[e.jsx(Yt,{asChild:!0,children:e.jsxs("div",{className:`
                                    relative flex flex-col items-center gap-2 p-3 rounded-xl border-2 transition-all duration-200 cursor-default
                                    ${u?`${_e[h]} bg-card shadow-md ${Re[h]}`:"border-dashed border-muted-foreground/20 bg-muted/30 opacity-50"}
                                `,children:[e.jsx("div",{className:`text-3xl ${u?"":"grayscale"}`,children:o.is_hidden&&!u?"â“":o.icon}),e.jsx("p",{className:"text-xs font-medium text-center leading-tight",children:o.is_hidden&&!u?"Hidden":o.name}),e.jsx(_,{className:`text-[10px] px-1.5 py-0 ${u?Ee[h]+" text-white":"bg-muted text-muted-foreground"}`,children:h}),!u&&e.jsx("div",{className:"absolute top-1.5 right-1.5",children:e.jsx(ce,{className:"h-3 w-3 text-muted-foreground"})})]})}),e.jsxs(Xt,{className:"max-w-[200px]",children:[e.jsx("p",{className:"font-semibold",children:o.is_hidden&&!u?"Hidden Badge":o.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:o.is_hidden&&!u?"Complete the secret requirement to unlock!":o.description}),u&&k&&e.jsxs("p",{className:"text-xs text-green-500 mt-1",children:["âœ… Earned ",re(k.earned_at)]})]})]},o.id)})})})})]})}),e.jsx(F,{value:"perks",children:e.jsxs(P,{children:[e.jsx(R,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(wt,{className:"h-5 w-5 text-amber-500"}),"Level Perks"]})}),e.jsx(E,{children:e.jsx("div",{className:"space-y-3",children:w.map(o=>e.jsxs("div",{className:`
                        flex items-center gap-4 p-4 rounded-xl border transition-all duration-200
                        ${o.unlocked?"bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-500/10 dark:to-orange-500/10 border-amber-200 dark:border-amber-500/20":"bg-muted/30 border-muted opacity-60"}
                        `,children:[e.jsx("span",{className:"text-2xl",children:o.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-semibold text-sm",children:o.title}),e.jsxs(_,{variant:"outline",className:"text-[10px]",children:["Level ",o.level]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:o.description})]}),o.unlocked?e.jsx(yt,{className:"h-5 w-5 text-amber-500"}):e.jsx(ce,{className:"h-5 w-5 text-muted-foreground"})]},o.level))})})]})}),e.jsx(F,{value:"activity",children:e.jsxs(P,{children:[e.jsx(R,{children:e.jsx(S,{children:"Recent Activity"})}),e.jsx(E,{children:j.length===0?e.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No activity yet. Submit your first sighting to get started! ðŸš€"}):e.jsx("div",{className:"space-y-3",children:j.map(o=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("span",{className:"text-xl",children:Oe[o.type]||"ðŸ“Œ"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{variant:"outline",className:"capitalize text-[10px]",children:o.type.replace("_"," ")}),e.jsx("span",{className:"text-xs text-muted-foreground",children:re(o.created_at)})]}),e.jsx("p",{className:"mt-1 text-sm",children:o.description})]})]}),o.xp_earned>0&&e.jsxs(_,{variant:"secondary",className:"ml-4 shrink-0",children:["+",o.xp_earned," XP"]})]},o.id))})})]})})]}):e.jsx("div",{className:"mt-8 text-center text-muted-foreground",children:e.jsx("p",{children:"Detailed stats and activity are private."})})]})}export{ss as default};
