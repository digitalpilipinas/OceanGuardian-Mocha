import{u as g,j as e,g as l,C as j,B as N,a as v,b,f as w,c as y,h as C}from"./index-BYUs0uFb.js";import{e as M,r as s,L as k}from"./vendor-DvMla3zT.js";import{T as L,a as T,b as i}from"./tabs-B9Fvvibd.js";import{P as _,E,l as S,C as B,i as D,m as P}from"./ui-BFD__GsY.js";import"./maps-DK6RsE9k.js";function q(){const{profile:n}=g(),o=M(),[c,p]=s.useState([]),[u,d]=s.useState(!0),[t,h]=s.useState("upcoming"),[m,f]=s.useState(!1);return s.useEffect(()=>{n&&fetch("/api/profiles/me").then(a=>a.ok?a.json():null).then(a=>{a&&["admin","ambassador"].includes(a.role)&&f(!0)}).catch(()=>{})},[n]),s.useEffect(()=>{(async()=>{d(!0);try{const r=t==="all"?"":`?status=${t}`,x=await fetch(`/api/missions${r}`);x.ok&&p(await x.json())}catch(r){console.error("Failed to fetch missions",r)}finally{d(!1)}})()},[t]),e.jsxs("div",{className:"container mx-auto px-4 py-8 pb-20 md:pb-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-10",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-extrabold bg-gradient-to-r from-primary to-blue-600 bg-clip-text text-transparent",children:"Cleanup Missions"}),e.jsx("p",{className:"text-muted-foreground text-lg",children:"Join the community to clean up our oceans!"})]}),m&&e.jsxs(l,{variant:"neomorph-primary",size:"lg",className:"h-12 px-6",onClick:()=>o("/missions/create"),children:[e.jsx(_,{className:"mr-2 h-5 w-5"}),"Create Mission"]})]}),e.jsx("div",{className:"mb-10",children:e.jsx(L,{defaultValue:"upcoming",onValueChange:h,className:"w-full",children:e.jsxs(T,{className:"bg-transparent p-1 neo-pressed rounded-2xl h-14",children:[e.jsx(i,{value:"upcoming",className:"rounded-xl h-12 data-[state=active]:neo-flat data-[state=active]:bg-card data-[state=active]:text-primary px-8",children:"Upcoming"}),e.jsx(i,{value:"active",className:"rounded-xl h-12 data-[state=active]:neo-flat data-[state=active]:bg-card data-[state=active]:text-primary px-8",children:"Active Now"}),e.jsx(i,{value:"completed",className:"rounded-xl h-12 data-[state=active]:neo-flat data-[state=active]:bg-card data-[state=active]:text-primary px-8",children:"Completed"})]})})}),u?e.jsx("div",{className:"flex justify-center py-20",children:e.jsx(E,{className:"h-12 w-12 animate-spin text-primary"})}):c.length===0?e.jsxs("div",{className:"text-center py-20 neo-flat rounded-3xl bg-card/50",children:[e.jsx("p",{className:"text-2xl font-bold text-muted-foreground",children:"No missions found"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Be the first to organize one!"}),m&&e.jsx(l,{variant:"neomorph",className:"mt-8 px-10 h-14",onClick:()=>o("/missions/create"),children:"Create Mission"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:c.map(a=>e.jsxs(j,{variant:"neomorph",className:"flex flex-col h-full group/mission",children:[a.image_url&&e.jsxs("div",{className:"relative h-56 w-full overflow-hidden",children:[e.jsx("img",{src:a.image_url,alt:a.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover/mission:scale-110"}),e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx(N,{className:"capitalize px-4 py-1.5 rounded-full glass-liquid border-none text-white font-bold shadow-xl",children:a.status})})]}),e.jsxs(v,{className:"pb-2",children:[e.jsx(b,{className:"text-xl font-bold line-clamp-1",children:a.title}),e.jsxs(w,{className:"flex items-center gap-1.5 font-medium text-primary",children:[e.jsx(S,{className:"h-3.5 w-3.5"})," ",a.location_name]})]}),e.jsxs(y,{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3 mb-6 bg-muted/20 p-3 rounded-xl border border-border/10",children:a.description}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-xs font-bold uppercase tracking-widest text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 neo-pressed rounded-full",children:[e.jsx(B,{className:"h-3.5 w-3.5 text-primary"}),new Date(a.start_time).toLocaleDateString()]}),e.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 neo-pressed rounded-full",children:[e.jsx(D,{className:"h-3.5 w-3.5 text-primary"}),a.max_participants?`Max ${a.max_participants}`:"Open"]})]})]}),e.jsx(C,{className:"pt-4",children:e.jsx(l,{variant:"neomorph",className:"w-full h-12 text-sm font-bold uppercase tracking-widest group-hover/mission:bg-primary group-hover/mission:text-primary-foreground transition-all duration-300",asChild:!0,children:e.jsxs(k,{to:`/missions/${a.id}`,children:["View Details ",e.jsx(P,{className:"ml-2 h-4 w-4"})]})})})]},a.id))})]})}export{q as default};
