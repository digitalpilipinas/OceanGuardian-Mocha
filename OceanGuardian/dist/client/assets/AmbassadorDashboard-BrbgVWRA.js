import{u as w,j as s,g as d,C as r,a as i,b as n,c as l,f as v}from"./index-Fy2jmMwR.js";import{e as C,r as o,L as m}from"./vendor-DvMla3zT.js";import{T,a as M,b as f,c as x,d as A,e as h}from"./table-C6OPaaIi.js";import{G as L,P,i as D,b as u,l as g,Q as E}from"./ui-BFD__GsY.js";import"./maps-DK6RsE9k.js";function G(){const{profile:a,loading:c}=w(),p=C(),[e,N]=o.useState(null),[b,j]=o.useState(!0);return o.useEffect(()=>{!c&&a?.role!=="ambassador"&&a?.role},[a,c,p]),o.useEffect(()=>{(a?.role==="ambassador"||a?.role==="admin")&&(j(!0),fetch("/api/ambassador/stats").then(t=>{if(t.ok)return t.json();throw new Error("Failed to fetch stats")}).then(N).catch(console.error).finally(()=>j(!1)))},[a]),c||b?s.jsx("div",{className:"flex h-[50vh] items-center justify-center",children:"Loading Regional Data..."}):e?s.jsxs("div",{className:"container mx-auto p-6 space-y-8",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[s.jsx(L,{className:"h-8 w-8 text-primary"}),"Ambassador Dashboard"]}),s.jsxs("p",{className:"text-muted-foreground",children:["Managing region: ",s.jsx("span",{className:"font-semibold text-foreground",children:e.region})]})]}),s.jsx(d,{asChild:!0,children:s.jsxs(m,{to:"/missions/create",children:[s.jsx(P,{className:"mr-2 h-4 w-4"})," Organize Mission"]})})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs(r,{children:[s.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(n,{className:"text-sm font-medium",children:"Community Members"}),s.jsx(D,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(l,{children:[s.jsx("div",{className:"text-2xl font-bold",children:e.total_users}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Guardians in ",e.region]})]})]}),s.jsxs(r,{children:[s.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(n,{className:"text-sm font-medium",children:"Active Missions"}),s.jsx(u,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(l,{children:[s.jsx("div",{className:"text-2xl font-bold",children:e.active_missions}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Happening now"})]})]}),s.jsxs(r,{children:[s.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(n,{className:"text-sm font-medium",children:"Total Impact"}),s.jsx(g,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(l,{children:[s.jsx("div",{className:"text-2xl font-bold",children:e.total_impact}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Sightings reported"})]})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs(r,{className:"col-span-2 md:col-span-1",children:[s.jsxs(i,{children:[s.jsx(n,{children:"Top Contributors"}),s.jsxs(v,{children:["Highest XP earners in ",e.region]})]}),s.jsx(l,{children:s.jsxs(T,{children:[s.jsx(M,{children:s.jsxs(f,{children:[s.jsx(x,{className:"w-[50px]"}),s.jsx(x,{children:"User"}),s.jsx(x,{className:"text-right",children:"XP"})]})}),s.jsx(A,{children:e.top_contributors.map((t,y)=>s.jsxs(f,{children:[s.jsx(h,{className:"font-medium text-muted-foreground",children:y+1}),s.jsx(h,{children:s.jsx("div",{className:"font-medium",children:t.username})}),s.jsx(h,{className:"text-right font-bold",children:t.xp.toLocaleString()})]},t.user_id))})]})})]}),s.jsxs(r,{className:"col-span-2 md:col-span-1 bg-gradient-to-br from-primary/5 to-transparent border-primary/20",children:[s.jsx(i,{children:s.jsxs(n,{className:"flex items-center gap-2",children:[s.jsx(E,{className:"h-5 w-5 text-yellow-500"}),"Ambassador Tools"]})}),s.jsxs(l,{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"As an Ambassador, you can organize missions and verify local sightings."}),s.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[s.jsx(d,{variant:"secondary",className:"justify-start",asChild:!0,children:s.jsxs(m,{to:"/missions",children:[s.jsx(u,{className:"mr-2 h-4 w-4"})," Manage Missions"]})}),s.jsx(d,{variant:"secondary",className:"justify-start",asChild:!0,children:s.jsxs(m,{to:"/map",children:[s.jsx(g,{className:"mr-2 h-4 w-4"})," View Regional Map"]})})]})]})]})]})]}):s.jsxs("div",{className:"container mx-auto p-8 text-center",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"No Regional Data"}),s.jsx("p",{children:"You might not have a region assigned yet."})]})}export{G as default};
